(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{409:function(e,t,n){"use strict";var r=n(372),a=n(11),l=n(16),i=n(2),c=n(3),u=n.n(c),o=n(74),m=n(24),s=n(961),d=n(937),f=n(938),p=n(964),b=function(e,t,n){return e[t][n]},h=function(e,t,n,r){return[e[n].id,t[r].id]},g=function(e,t,n,r,c){return function(o,m){return u.a.createElement(s.a,{onConfirm:function(a,u,o){return function(e,t,n,r,a,c,u,o){var m=h(n,r,a,c);Number.parseFloat(e)!==t[m[0]][m[1]]&&o(!0),u(Object(i.a)({},t,Object(l.a)({},m[0],Object(i.a)({},t[m[0]],Object(l.a)({},m[1],Number.parseFloat(e))))))}(a,e,t,n,u,o,r,c)},rowIndex:o,columnIndex:m,value:b.apply(void 0,[e].concat(Object(a.a)(h(t,n,o,m))))})}},E=function(e){return function(t){return u.a.createElement(d.a,null,e[t].name)}};t.a=function(e){var t=e.x,n=e.y,a=e.handleSubmit,l=e.typeKey,i=e.values,s=Object(c.useState)(i),d=Object(r.a)(s,2),b=d[0],h=d[1],y=Object(c.useState)(!1),v=Object(r.a)(y,2),w=v[0],x=v[1];return u.a.createElement("div",null,u.a.createElement(p.a,{numRows:t.length,rowHeaderCellRenderer:E(t)},function(e,t,n,r,a,l){return n.map(function(i){return u.a.createElement(f.a,{key:"MATRIX_".concat(a,"_").concat(i.id),name:i.name,cellRenderer:g(e,t,n,r,l)})})}(b,t,n,h,l,x)),u.a.createElement(o.b,{style:{position:"fixed",bottom:"30px",right:"50px"},type:"submit",text:"Save Changes",disabled:!w,onClick:function(){a(l,b),x(!1)},intent:m.a.SUCCESS,large:!0}))}},410:function(e,t,n){"use strict";var r=n(3),a=n.n(r),l=n(5),i=n.n(l),c=n(0),u=n(16),o=n(2),m=n(372);var s=function(e,t,n,r,l){var i=a.a.useState(e),c=Object(m.a)(i,2),s=c[0],d=c[1],f=a.a.useState({}),p=Object(m.a)(f,2),b=p[0],h=p[1],g=a.a.useState({}),E=Object(m.a)(g,2),y=E[0],v=E[1],w=a.a.useState(!1),x=Object(m.a)(w,2),O=x[0],j=x[1],C=a.a.useState(!1),k=Object(m.a)(C,2),I=k[0],A=k[1];return a.a.useEffect(function(){O&&(0===Object.keys(b).length?(l(s),j(!1),A(!1)):j(!1))},[b,O,l,s]),a.a.useEffect(function(){d(e)},[e]),{handleSubmit:function(e){e.preventDefault();var a=t(s,r);h(a);var l=n(s,r);v(l),j(!0)},handleChange:function(e){d(Object(o.a)({},s,Object(u.a)({},e.target.name,e.target.value))),A(!0)},handleBlur:function(){var e=t(s,r);h(e);var a=n(s,r);v(a),A(!0)},values:s,errors:b,warnings:y,isSubmitting:O,touched:I}},d=n(74),f=n(24),p=n(482),b=n(471),h=n(433),g=n(589),E=n(590),y=n(638),v=n(434),w=n(967),x=n(62),O=n(61),j=n(4),C=function(e){var t=e.model,n=j.w(t),r=n.measures,a=n.parameters,l=n.stakeholders,i=r.reduce(function(e,t){return e.push("mb_".concat(t.name.replace(/ /gi,"_"))),e.push("ms_".concat(t.name.replace(/ /gi,"_"))),e.push("mc_".concat(t.name.replace(/ /gi,"_"))),e},[]),c=a.reduce(function(e,t){return e.push(t.name),e},i);return l.reduce(function(e,t){return e.push("sr_".concat(t.name.replace(/ /gi,"_"))),e.push("sm_".concat(t.name.replace(/ /gi,"_"))),e},c)},k=n(629),I=n.n(k),A=(n(533),Object(O.b)(function(e){return{options:C(e)}},function(){return{}})(function(e){var t=e.options,n=(e.initialValue,Object(x.a)(e,["options","initialValue"]));return a.a.createElement(I.a,Object.assign({style:{width:"100%"},Component:"input",options:t,trigger:"",spacer:" ",matchAny:!0},n))})),T=n(11),S=n(415),R=n(929),N=(n(534),function(e){return function(t,n){var r=e.map(function(e){return e.id}).includes(t.id);return a.a.createElement(S.a,{key:"MEASURE_THEME_SELECT_VALUE_".concat(t.id),text:t.name,active:n.modifiers.active,icon:r?"tick":"blank",onClick:n.handleClick})}}),B=function(e){return e.name},D=function(e,t){return function(n){e.map(function(e){return e.id}).includes(n.id)?t(e.filter(function(e){return e.id!==n.id}).map(function(e){return e.id})):t([].concat(Object(T.a)(e.map(function(e){return e.id})),[n.id]))}},_=Object(O.b)(function(e){return{measures:e.model.programmes[0].measures}},null)(function(e){var t=e.measures,n=e.active,r=e.setActive,l=n.map(function(e){var n=t.find(function(t){return t.id===e});if(!n)throw new Error("Selected measure was not found");return n});return a.a.createElement("div",{style:{width:"100%"}},a.a.createElement(R.a,{selectedItems:l,items:t,itemRenderer:N(l),onItemSelect:D(l,r),tagRenderer:B,tagInputProps:{onRemove:function(e,t){return r(l.filter(function(e,n){return n!==t}).map(function(e){return e.id}))}},popoverProps:{position:"auto-end"}}))});n.d(t,"a",function(){return F});var V={position:"fixed",bottom:"30px",right:"50px"},F=function(e){return a.a.createElement(d.b,Object.assign({style:V,type:"submit",text:"Save Changes",intent:f.a.SUCCESS,large:!0},e))},U=function(){return a.a.createElement(p.a,{minimal:!0,disabled:!0,icon:"error",intent:f.a.DANGER})},L=function(){return a.a.createElement(p.a,{minimal:!0,disabled:!0,icon:"warning-sign",intent:f.a.WARNING})},G=function(){return a.a.createElement(p.a,{minimal:!0,disabled:!0,icon:"percentage",intent:f.a.PRIMARY})},P=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT,r=e.error&&U||e.warning&&L;return a.a.createElement(b.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(h.a,{intent:n,type:"text",name:e.name,value:e.value,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:e.placeholder,rightElement:r&&a.a.createElement(r,null)}))},q=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT;return a.a.createElement(b.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(g.a,{fill:!0,intent:n,name:e.name,value:e.value,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:e.placeholder}))},M=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT,r=e.error&&U||e.warning&&L,l=i()(e.value,c.V,!0).toDate();return a.a.createElement(b.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(w.a,{intent:n,value:l,onChange:function(t,n){n&&e.handleChange({target:{name:e.name,value:i()(t).format(c.V)}})},inputProps:{onBlur:e.handleBlur},dayPickerProps:{onBlur:e.handleBlur},placeholder:e.placeholder,rightElement:r&&a.a.createElement(r,null),parseDate:function(e){return i()(e,c.V,!0).toDate()},formatDate:function(e){return i()(e).format(c.V)},maxDate:i()("2040-12-31",c.V,!0).toDate(),canClearSelection:!1}))},W=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT,r=e.items.map(function(e){return a.a.createElement("option",{key:e.id,value:e.value},e.label)});return a.a.createElement(b.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(E.a,{intent:n,name:e.name,value:e.value,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:e.placeholder},r))},K=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT,r=e.error&&U||e.warning&&L,l="number"===typeof e.minValue||"number"===typeof e.maxValue;return a.a.createElement(b.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(y.a,{intent:n,name:e.name,value:e.value,onValueChange:function(t,n){Number.isNaN(t)||"."===n[n.length-1]?e.handleChange({target:{name:e.name,value:n}}):e.handleChange({target:{name:e.name,value:t}})},onBlur:e.handleBlur,placeholder:e.placeholder,rightElement:r&&a.a.createElement(r,null),clampValueOnBlur:l,min:e.minValue,max:e.maxValue,allowNumericCharactersOnly:!1}))},J=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT,r=e.error&&U||e.warning&&L||G,l=e.value;return"number"===typeof e.value&&(l=100*e.value),a.a.createElement(b.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(y.a,{intent:n,name:e.name,value:l,onValueChange:function(t,n){Number.isNaN(t)||"."===n[n.length-1]?e.handleChange({target:{name:e.name,value:n}}):e.handleChange({target:{name:e.name,value:t/100}})},onBlur:e.handleBlur,placeholder:e.placeholder,rightElement:r&&a.a.createElement(r,null),clampValueOnBlur:!0,min:0,max:100,minorStepSize:.5,majorStepSize:10,allowNumericCharactersOnly:!1}))},H=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT;return a.a.createElement(b.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(_,{active:e.value,setActive:function(t){return e.handleChange({target:{name:"measures",value:t}})}}))},z=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT;return a.a.createElement(b.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(v.c,{intent:n,name:e.name,checked:e.value,onChange:function(){e.handleChange({target:{name:"dynamic",value:!e.value}})},onBlur:e.handleBlur,placeholder:e.placeholder}))},Y=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT;return a.a.createElement(b.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(A,{intent:n,name:e.name,value:e.value,onChange:function(t){return e.handleChange({target:{name:e.name,value:t}})},onBlur:e.handleBlur,placeholder:e.placeholder}))};t.b=function(e){var t=e.formData,n=e.initialValues,r=e.model,l=e.handleUpdate,i=t.fields,c=t.validate,u=t.warn,o=s(n,c,u,r,l);return a.a.createElement("form",{onSubmit:o.handleSubmit,style:{width:"700px"}},i.map(function(e){return function(t){var n=e.errors,r=e.warnings,l=e.values,i=e.handleChange,c=e.handleBlur,u=t.id,o=t.name;switch(t.type){case"text":if("string"!==typeof l[o])throw new Error("Value of text input type was not a string");return a.a.createElement(P,Object.assign({key:u},t,{error:n[o],warning:r[o],value:l[o],handleChange:i,handleBlur:c}));case"textarea":if("string"!==typeof l[o])throw new Error("Value of textarea input type was not a string");return a.a.createElement(q,Object.assign({key:u},t,{error:n[o],warning:r[o],value:l[o],handleChange:i,handleBlur:c}));case"number":if("string"!==typeof l[o]&&"number"!==typeof l[o])throw new Error("Value of number input type was not a string or number");return a.a.createElement(K,Object.assign({key:u},t,{error:n[o],warning:r[o],value:l[o],handleChange:i,handleBlur:c}));case"percentage":if("string"!==typeof l[o]&&"number"!==typeof l[o])throw new Error("Value of percentage input type was not a string or number");return a.a.createElement(J,Object.assign({key:u},t,{error:n[o],warning:r[o],value:l[o],handleChange:i,handleBlur:c}));case"date":if("string"!==typeof l[o])throw new Error("Value of date input type was not a string");return a.a.createElement(M,Object.assign({key:u},t,{error:n[o],warning:r[o],value:l[o],handleChange:i,handleBlur:c}));case"select":if("string"!==typeof l[o])throw new Error("Value of select input type was not a boolean");return a.a.createElement(W,Object.assign({key:u},t,{error:n[o],warning:r[o],value:l[o],handleChange:i,handleBlur:c}));case"switch":if("boolean"!==typeof l[o])throw new Error("Value of switch input type was not a boolean");return a.a.createElement(z,Object.assign({key:u},t,{error:n[o],warning:r[o],value:l[o],handleChange:i,handleBlur:c}));case"equation":if("string"!==typeof l[o])throw new Error("Value of equation input type was not a string");return a.a.createElement(Y,Object.assign({key:u},t,{error:n[o],warning:r[o],value:l[o],handleChange:i,handleBlur:c}));case"theme-measures":if(!Array.isArray(l[o]))throw new Error("Value of measures input type was not an array");return a.a.createElement(H,Object.assign({key:u},t,{error:n[o],warning:r[o],value:l[o],handleChange:i}));default:throw new Error("Unrecognised field type when rendering form")}}}(o)),a.a.createElement(F,{disabled:o.isSubmitting||!o.touched}))}},532:function(e,t,n){"use strict";var r=n(410);t.a=r.b},533:function(e,t,n){},534:function(e,t,n){},541:function(e,t,n){"use strict";var r=n(62),a=n(3),l=n.n(a),i=n(400),c=n(385),u=n(189),o=n(74),m=n(63),s=n(24),d=function(e){var t=e.children,n=e.title,a=e.text,d=e.dismissLabel,f=e.onClick,p=e.confirmLabel,b=Object(r.a)(e,["children","title","text","dismissLabel","onClick","confirmLabel"]);return l.a.createElement(i.a,b,t,l.a.createElement("div",{style:{padding:10}},l.a.createElement(c.g,null,n),Array.isArray(a)?a.map(function(e,t){return l.a.createElement(u.a,{key:"confirmation_".concat(t)},e)}):l.a.createElement(u.a,null,a),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:15}},l.a.createElement(o.b,{className:m.e.POPOVER_DISMISS,style:{marginRight:10}},d),l.a.createElement(o.b,{intent:s.a.DANGER,className:m.e.POPOVER_DISMISS,onClick:f},p))))};d.defaultProps={confirmLabel:"Confirm",dismissLabel:"Cancel"};var f=d;t.a=f},962:function(e,t,n){"use strict";n.r(t);var r=n(61),a=n(101);function l(e){var t=e.editor.explorer.selected;if(t)return!a.q(t.id)||a.p(t.type.id)?"form":a.q(t.id)&&!a.l(t.type.id)?"table":a.l(t.type.id)?"matrix":void 0}function i(e){return"form"!==l(e)?void 0:e.editor.explorer.selected.id}function c(e){return"form"!==l(e)?void 0:e.editor.explorer.selected.type.key}var u=n(3),o=n.n(u);function m(e){var t=e.editor.explorer.selected;if(t)return t.type}function s(e){var t=e.editor.explorer.selected;return"form"===l(e)?t.id:void 0}var d=n(0);function f(e){var t=e.editor.explorer.selected;if(t){for(var n=d.Bb,r=n.icon,a=n.key,l=d.rc,i=l.icon,c=l.key,u=l.children,o=e[a][c][0],m=[],s=t.path.length,f=0;f<s;f++)if(0===f){var p=e[a].name;m.push({icon:r,text:p})}else if(1===f){var b=e[a][c][0].name;m.push({icon:i,text:b})}else if(2===f){var h=u[t.path[2]].name;m.push({icon:u[t.path[2]].icon,text:h})}else if(3===f){var g=o[u[t.path[2]].key],E=void 0;if(Array.isArray(g)&&(E=g[t.path[3]]),E){var y=void 0;y=E.name&&"string"===typeof E.name?E.name:E.reference&&"string"===typeof E.reference?E.reference:"Unknown",m.push({icon:u[t.path[2]].icon,text:y})}}return m}return[]}var p=n(587),b={width:"100%"},h=Object(r.b)(function(e){return{breadcrumbs:f(e)}},null)(function(e){var t=e.breadcrumbs;return o.a.createElement("div",{style:b},o.a.createElement(p.a,{items:t}))}),g=n(76),E=n.n(g),y=n(108),v=n(24),w=n(74),x=n(62),O=n(541),j=n(378),C=n(4);function k(e){var t=C.w(e.model),n=t.costs,r=t.deliverables,a=t.stakeholders,l=t.phases;return{costs:n.length,deliverables:r.length,stakeholders:a.length,phases:l.length}}var I=Object(r.b)(function(e){return{elementCounts:k(e),coreBenefits:e.model.programmes[0]._coreBenefits}},function(e){return{handleDelete:function(t,n){return e(Object(j.c)(t,n))}}})(function(e){var t=e.elementId,n=e.elementType,r=e.handleDelete,l=e.elementCounts,i=e.coreBenefits,c=Object(x.a)(e,["elementId","elementType","handleDelete","elementCounts","coreBenefits"]),u=function(e,t,n,r){switch(t.id){case d.v:return n.includes(e);case d.gb:return r.deliverables<2;case d.O:return r.costs<2;case d.bc:return r.phases<2;case d.Ic:return r.stakeholders<2;default:return!1}}(t,n,i,l);return o.a.createElement(O.a,{onClick:function(){return r(t,n.key)},confirmLabel:"Delete",text:a.b(n.id),title:"Confirm deletion"},o.a.createElement(w.b,Object.assign({},c,{disabled:u})))}),A=n(400),T=n(385),S=n(189),R=function(e){var t=e.children,n=e.title,r=e.text,a=Object(x.a)(e,["children","title","text"]);return o.a.createElement(A.a,a,t,o.a.createElement("div",{style:{padding:10,maxWidth:"400px"}},o.a.createElement(T.g,null,n),Array.isArray(r)?r.map(function(e,t){return o.a.createElement("div",{key:"info_".concat(t),style:{marginBottom:"10px"}},o.a.createElement(S.a,null,e))}):o.a.createElement(S.a,null,r)))},N=Object(r.b)(null,function(e){return{handleDuplicate:function(t,n){return e(Object(j.e)(t,n))}}})(function(e){var t=e.elementId,n=e.elementType,r=e.handleDuplicate,a=Object(x.a)(e,["elementId","elementType","handleDuplicate"]);return o.a.createElement(w.b,Object.assign({},a,{onClick:function(){return r(t,n.key)}}))});function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var D=n(414),_=n(547),V=n(415),F=Object(r.b)(null,function(e){return{handleAddElement:function(t){return e(Object(j.a)(t))}}})(function(e){var t=e.elementType,n=e.handleAddElement,r=Object(x.a)(e,["elementType","handleAddElement"]);return o.a.createElement(V.a,Object.assign({text:E.a.singular(t.name),icon:t.icon},r,{onClick:function(){return n(t)}}))}),U=function(){return o.a.createElement(D.a,null,d.a.map(function(e){return o.a.createElement(F,{elementType:e,key:"new_element_button_".concat(e.id)})}),o.a.createElement(_.a,null),d.Nc.map(function(e){return o.a.createElement(F,{elementType:e,key:"new_element_button_".concat(e.id)})}))},L=function(e){var t=B({},e);return o.a.createElement(A.a,{content:o.a.createElement(U,null)},o.a.createElement(w.b,Object.assign({icon:"add"},t,{rightIcon:"caret-down",small:!0}),"Add New Element"))},G=function(e){return e.editor.benefitAttribution.selectedBenefit?e.editor.benefitAttribution.selectedBenefit:e.model.programmes[0]._coreBenefits[0]},P=n(32),q=n(60),M=n(960),W={margin:"10px 0",minHeight:"24px"},K={display:"inline-block"},J={marginRight:"10px"},H={display:"inline-block",marginLeft:"5px"},z={display:"inline-block",marginRight:"10px"},Y=function(e){return function(t,n){var r=n.handleClick;return o.a.createElement(V.a,{key:"BENEFIT_SELECT_VALUE_".concat(t.id),text:t.name,active:t.id===e.id,label:t.type===d.z?"Financial":"Non-Financial",onClick:r})}},Z=Object(r.b)(function(e){return{benefits:C.f(e.model),active:C.e(e.model,G(e))}},function(e){return{handleChange:function(t){return e({type:"SET_SELECTED_BENEFIT_ATTRIBUTION",value:t})}}})(function(e){var t=e.benefits,n=e.active,r=e.handleChange;Object(x.a)(e,["benefits","active","handleChange"]);return o.a.createElement("div",{style:H},o.a.createElement(M.a,{items:t,itemRenderer:Y(n),onItemSelect:function(e){return r(e.id)},onActiveItemChange:function(e){return r(e.id)},activeItem:n,popoverProps:{position:P.a.RIGHT_BOTTOM},filterable:!1},o.a.createElement("div",{style:z},"Select Benefit:"),o.a.createElement(y.a,{style:{width:"130px"}},o.a.createElement(w.b,{fill:!0,small:!0,intent:v.a.PRIMARY,rightIcon:"caret-down",alignText:q.a.LEFT,text:n.name}))))}),X=n(482),Q=function(e){return o.a.createElement(X.a,{intent:v.a.PRIMARY,style:J},e)},$=function(e){var t=function(e){switch(e){case d.m:return["Deliverables","Phases"];case d.p:return["Benefits","Phases"];case d.K:return["Costs","Phases"];case d.Ec:return["Benefits","Stakeholders"];default:throw new Error("Tried to render matrix tags when matrix was not selected")}}(e.typeId);return o.a.createElement("div",{style:K},"Rows: ",Q(t[0]),"Columns: ",Q(t[1]))},ee=function(){return o.a.createElement(y.a,null,o.a.createElement(L,{intent:v.a.PRIMARY}))},te=function(e){var t=e.type,n=e.elementId;return o.a.createElement(y.a,null,o.a.createElement(N,{elementId:n,elementType:t,style:{marginLeft:"10px"},icon:"duplicate",text:"Duplicate",small:!0}),o.a.createElement(I,{elementId:n,elementType:t,text:"Delete",icon:"trash",intent:v.a.DANGER,small:!0}))},ne=function(e){var t=e.type,n=t.id,r=t.name;return o.a.createElement(y.a,{style:{float:"right",marginRight:"10px"}},o.a.createElement(R,{title:"What is a ".concat(E.a.singular(r),"?"),text:a.e(n)},o.a.createElement(w.b,{icon:"help",small:!0},"What is a ".concat(E.a.singular(r),"?"))))},re=function(e){var t=e.display,n=e.type,r=e.elementId;return o.a.createElement("div",{style:W},"matrix"===t&&o.a.createElement($,{typeId:n.id}),"matrix"===t&&n.id===d.m&&o.a.createElement(Z,null),["form","table"].includes(t)&&o.a.createElement(ee,null),function(e,t){return"form"===e&&![d.zb,d.pc].includes(t.id)}(t,n)&&o.a.createElement(te,{type:n,elementId:r}),["table","form"].includes(t)&&o.a.createElement(ne,{type:n}))},ae=function(e){return{position:"absolute",padding:"10px 10px 0 10px",top:0,left:0,zIndex:1,width:"calc(100% - 12px)",borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:"#00000030",backgroundColor:e?"rgb(48, 64, 77)":"white"}},le=Object(r.b)(function(e){return{dark:e.editor.dark,type:m(e),elementId:s(e)}},null)(function(e){var t=e.type,n=e.dark,r=e.display,a=e.elementId;e.breadcrumbs;return o.a.createElement("div",{style:ae(n)},o.a.createElement(h,null),o.a.createElement(re,{type:t,elementId:a,display:r}))}),ie=n(11),ce=n(2);function ue(e,t,n){switch(t){case d.Ab:var r=e.model;return{name:r.name,client:r.client,author:r.author};case d.qc:var a=C.w(e.model);return{name:a.name,start:a.start,financialStart:a.financialStart,scorecardStart:a.scorecardStart,unitOfMeasure:a.unitOfMeasure,mission:a.mission,vision:a.vision};case d.w:return B({},C.e(e.model,n));case d.P:return B({},C.g(e.model,n));case d.hb:return B({},C.i(e.model,n));case d.cc:return B({},C.u(e.model,n));case d.Jc:return B({},C.D(e.model,n));case d.vb:return B({},C.m(e.model,n));case d.Fb:return B({},C.o(e.model,n));case d.Sb:return B({},C.s(e.model,n));case d.Uc:var l=B({},C.F(e.model,n));return Object(ce.a)({},l);case d.pb:return B({},C.k(e.model,n));case d.e:return B({},C.d(e.model,n));case d.Nb:return B({},C.q(e.model,n));case d.F:return B({},C.H(e.model,n));default:throw new Error("Unknown element type when retreiving form values")}}function oe(e,t){return function(n){if(n.items&&"string"===typeof n.items){var r=Object(a.i)(n.items).key,l=e.model.programmes[0][r];return Object(ce.a)({},n,{items:[{id:"".concat(t.id,"_none_item"),value:"none",label:"None"}].concat(Object(ie.a)(l.map(function(e){return{id:"".concat(t.id,"_").concat(e.id),value:e.id,label:e.name}})))})}return n}}function me(e,t){switch(t){case d.Ab:return d.xb;case d.qc:return d.oc;case d.w:return d.t;case d.P:return d.N;case d.hb:return d.fb;case d.cc:return d.ac;case d.Jc:return d.Hc;case d.vb:var n=d.sb.fields.map(oe(e,d.sb));return Object(ce.a)({},d.sb,{fields:n});case d.Fb:var r=d.Cb.fields.map(oe(e,d.Cb));return Object(ce.a)({},d.Cb,{fields:r});case d.Sb:return d.Pb;case d.Uc:return d.Sc;case d.pb:return d.nb;case d.e:return d.c;case d.Nb:return d.Lb;case d.F:var a=d.D.fields.map(oe(e,d.D));return Object(ce.a)({},d.D,{fields:a});default:throw new Error("Unknown element type when retreiving form data")}}var se=n(532),de=function(e,t){return function(n){return{initialValues:ue(n,e,t),formData:me(n,e),model:n.model}}},fe=function(e,t){return function(n){return{handleUpdate:function(r){return n(Object(j.f)(t,e,r))}}}},pe=function(e,t){switch(e){case d.Ab:return Object(r.b)(de(d.Ab,""),fe(d.Ab,""))(se.a);case d.qc:return Object(r.b)(de(d.qc,""),fe(d.qc,""))(se.a);case d.w:return function(e){return Object(r.b)(de(d.w,e),fe(d.w,e))(se.a)}(t);case d.P:return function(e){return Object(r.b)(de(d.P,e),fe(d.P,e))(se.a)}(t);case d.hb:return function(e){return Object(r.b)(de(d.hb,e),fe(d.hb,e))(se.a)}(t);case d.cc:return function(e){return Object(r.b)(de(d.cc,e),fe(d.cc,e))(se.a)}(t);case d.Jc:return function(e){return Object(r.b)(de(d.Jc,e),fe(d.Jc,e))(se.a)}(t);case d.vb:return function(e){return Object(r.b)(de(d.vb,e),fe(d.vb,e))(se.a)}(t);case d.Fb:return function(e){return Object(r.b)(de(d.Fb,e),fe(d.Fb,e))(se.a)}(t);case d.Sb:return function(e){return Object(r.b)(de(d.Sb,e),fe(d.Sb,e))(se.a)}(t);case d.Uc:return function(e){return Object(r.b)(de(d.Uc,e),fe(d.Uc,e))(se.a)}(t);case d.pb:return function(e){return Object(r.b)(de(d.pb,e),fe(d.pb,e))(se.a)}(t);case d.e:return function(e){return Object(r.b)(de(d.e,e),fe(d.e,e))(se.a)}(t);case d.Nb:return function(e){return Object(r.b)(de(d.Nb,e),fe(d.Nb,e))(se.a)}(t);case d.F:return function(e){return Object(r.b)(de(d.F,e),fe(d.F,e))(se.a)}(t);default:throw new Error("Unrecognised type key when rendering form")}},be=function(e){var t=e.typeKey,n=e.elementId,r=pe(t,n);return o.a.createElement(r,null)},he=n(372),ge=n(16),Ee=n(961),ye=n(937),ve=n(938),we=n(964),xe=function(e,t,n,r,a,l){return e[r][t[a].id][n[l].id]},Oe=function(e,t,n,r,a,l){return function(i,c){return o.a.createElement(Ee.a,{onConfirm:function(i,c,u){return function(e,t,n,r,a,l,i,c,u){var o=function(e,t,n,r){return[e[n].id,t[r].id]}(n,r,l,i);Number.parseFloat(e)!==t[a][o[0]][o[1]]&&u(!0),c(Object(ce.a)({},t,Object(ge.a)({},a,Object(ce.a)({},t[a],Object(ge.a)({},o[0],Object(ce.a)({},t[a][o[0]],Object(ge.a)({},o[1],Number.parseFloat(e))))))))}(i,e,t,n,r,c,u,a,l)},rowIndex:i,columnIndex:c,value:xe(e,t,n,r,i,c)})}},je=function(e){return function(t){return o.a.createElement(ye.a,null,e[t].name)}},Ce=function(e){var t=e.values,n=e.x,r=e.y,a=e.selectedZ,l=e.typeKey,i=e.handleSubmit,c=Object(u.useState)(t),m=Object(he.a)(c,2),s=m[0],d=m[1],f=Object(u.useState)(!1),p=Object(he.a)(f,2),b=p[0],h=p[1];return o.a.createElement("div",null,o.a.createElement(we.a,{numRows:n.length,rowHeaderCellRenderer:je(n)},function(e,t,n,r,a,l){return n.map(function(i){return o.a.createElement(ve.a,{key:i.id,name:i.name,cellRenderer:Oe(e,t,n,r,a,l)})})}(s,n,r,a,d,h)),o.a.createElement(w.b,{style:{position:"fixed",bottom:"30px",right:"50px"},type:"submit",text:"Save Changes",intent:v.a.SUCCESS,large:!0,disabled:!b,onClick:function(){i(l,s),h(!1)}}))},ke=function(e){return e.editor.benefitAttribution.selectedBenefit?e.editor.benefitAttribution.selectedBenefit:e.model.programmes[0]._coreBenefits[0]},Ie=Object(r.b)(function(e){return{x:C.j(e.model),y:C.v(e.model),values:e.model.programmes[0].benefitAttribution,selectedZ:ke(e),typeKey:"benefitAttribution"}},function(e){return{}})(Ce),Ae=n(409),Te=Object(r.b)(function(e){var t=e.model;e.matrix;return{x:C.f(t),y:C.v(t),values:t.programmes[0].benefitBuildup,typeKey:"benefitBuildup"}},function(e){return{}})(Ae.a),Se=Object(r.b)(function(e){var t=e.model;e.matrix;return{x:C.h(t),y:C.v(t),values:t.programmes[0].costAttribution,typeKey:"costAttribution"}},function(e){return{}})(Ae.a),Re=Object(r.b)(function(e){var t=e.model;e.matrix;return{x:C.f(t),y:C.E(t),values:t.programmes[0].stakeholderBenefits,typeKey:"stakeholderBenefits"}},function(e){return{}})(Ae.a),Ne=Object(r.b)(function(e){return{type:e.editor.explorer.selected.type}},function(e){return{handleSubmit:function(t,n){return e(Object(j.g)(t,n))}}})(function(e){var t=e.type,n=e.handleSubmit;switch(t.id){case d.p:return o.a.createElement(Te,{handleSubmit:n});case d.K:return o.a.createElement(Se,{handleSubmit:n});case d.Ec:return o.a.createElement(Re,{handleSubmit:n});case d.m:return o.a.createElement(Ie,{handleSubmit:n});default:throw new Error("Input matrix type not recognised")}}),Be=n(5),De=n.n(Be);function _e(e){var t=e.editor.explorer.selected;if(t&&a.q(t.id)&&!a.l(t.type.id)){var n=a.i(t.id),r=n.key,l=e.model.programmes[0][r];if(0!==l.length)return{headers:Object.keys(l[0]).filter(function(e){return"id"!==e}).map(function(e){return{id:"".concat(t.id,"_").concat(e),label:a.d(t.id,e),name:e}}),values:l.map(function(t){var l={};return Object.keys(t).filter(function(e){return"id"!==e}).forEach(function(i){De.a.isMoment(t[i])?l[i]=t[i].format(d.V):a.n(t[i])?l[i]=a.g(t[i]):a.m(r,i)?l[i]=a.h(e.model.programmes[0],t[i]):n.key===d.Uc&&"measures"===i?l[i]=a.f(e.model.programmes[0],t[i]):l[i]=t[i]}),l.id=t.id,l}),type:n}}}var Ve=n(435),Fe=n(38),Ue=n(102),Le=n(41),Ge=n(34),Pe=n(39),qe=n(7),Me=n.n(qe),We=n(591),Ke=Object(r.b)(null,function(e){return{handleJumpToForm:function(t,n){return e(Object(Ve.a)(t,n))}}})(function(e){var t=e.explorerElement,n=e.elementType,r=e.handleJumpToForm,a=Object(x.a)(e,["explorerElement","elementType","handleJumpToForm"]);return o.a.createElement(w.b,Object.assign({},a,{onClick:function(){return r(t,n)}}))}),Je={width:"100%",textAlign:"center",verticalAlign:"middle"},He=function(e){function t(){return Object(Fe.a)(this,t),Object(Le.a)(this,Object(Ge.a)(t).apply(this,arguments))}return Object(Pe.a)(t,e),Object(Ue.a)(t,[{key:"renderDeleteCell",value:function(e,t){return o.a.createElement("td",null,o.a.createElement("div",{style:Je},o.a.createElement(I,{elementId:e,elementType:t,intent:v.a.DANGER,icon:"trash",small:!0,minimal:!0})))}},{key:"renderDuplicateCell",value:function(e,t){return o.a.createElement("td",null,o.a.createElement("div",{style:Je},o.a.createElement(N,{elementId:e,elementType:t,icon:"duplicate",small:!0,minimal:!0})))}},{key:"renderEditCell",value:function(e,t){return o.a.createElement("td",null,o.a.createElement("div",{style:Je},o.a.createElement(Ke,{explorerElement:e,elementType:t,icon:"edit",small:!0,minimal:!0})))}},{key:"renderButtonHeader",value:function(e){return o.a.createElement("th",{key:e,style:{verticalAlign:"middle",textAlign:"center",width:80}},e)}},{key:"render",value:function(){var e=this;return o.a.createElement(We.a,{condensed:!0,interactive:!0,bordered:!0,striped:!0,style:{border:"solid 1px",borderColor:"#C3C3C3",tableLayout:"fixed",width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,this.props.headers.map(function(t){var n,r=t.id,a=t.label,l=e.props.widths.find(function(e){return e.key===r});return l&&(n=l.width),o.a.createElement("th",{key:r,style:{verticalAlign:"middle",textAlign:"center",width:n}},a)}),["Edit","Duplicate","Delete"].map(this.renderButtonHeader))),o.a.createElement("tbody",null,this.props.values.map(function(t){return o.a.createElement("tr",{key:t.id,onDoubleClick:e.props.edit(t,e.props.type)},e.props.headers.map(function(e){var n,r=e.name;return n="boolean"===typeof t[r]?t[r]?"Y":"N":t[r],o.a.createElement("td",{key:"".concat(t.id,"_").concat(r),style:{verticalAlign:"middle"}},o.a.createElement(S.a,{ellipsize:!0},n))}),e.renderEditCell(t,e.props.type),e.renderDuplicateCell(t.id,e.props.type),e.renderDeleteCell(t.id,e.props.type))})))}}]),t}(u.Component),ze=(Me.a.arrayOf(Me.a.shape({id:Me.a.string.isRequired,label:Me.a.string.isRequired,name:Me.a.string.isRequired})).isRequired,Me.a.arrayOf(Me.a.object).isRequired,Me.a.shape({id:Me.a.string.isRequired}).isRequired,Me.a.arrayOf(Me.a.shape({key:Me.a.string.isRequired,width:Me.a.number.isRequired})).isRequired,He),Ye=Object(r.b)(function(e){return{table:_e(e)}},function(e){return{editId:function(t,n){return function(){return e(Object(Ve.a)(t,n))}}}})(function(e){var t=e.table,n=e.editId;return t?o.a.createElement(ze,Object.assign({},t,{edit:n,widths:d.Rc})):o.a.createElement("div",null)}),Ze={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"column"},Xe={width:"100%",alignItems:"left",paddingLeft:"20px",paddingRight:"20px",paddingTop:"20px"},Qe={width:"100%",alignItems:"left",paddingLeft:"20px",paddingRight:"20px",marginBottom:"20px"},$e=function(){return o.a.createElement("div",{style:Ze},o.a.createElement("div",{style:Xe},o.a.createElement(T.e,null,"Welcome to the Value Management Toolset")),o.a.createElement("div",{style:Qe},o.a.createElement("p",null,"To get started, select a model element from the value explorer on the left!"),o.a.createElement("p",null,"If you need any help using the toolset, try one of the following links:"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"/"},"The Value Management Toolset User Guide:")," contains instructions on how to use and operate the toolset."),o.a.createElement("li",null,o.a.createElement("a",{href:"/"},"The Value Management Book:")," introduces the concept of value management and how to make the most out of the toolset."))))},et={position:"relative",top:"80px",padding:"10px 10px 10px 10px"},tt=function(e){var t=e.display,n=e.elementId,r=e.typeKey;return t?o.a.createElement("div",null,t&&o.a.createElement(le,{display:t}),o.a.createElement("div",{style:et},function(e){var t=e.display,n=e.elementId,r=e.typeKey;switch(t){case"form":if(!n||!r)throw new Error("Element id and type key must be defined to render form");return o.a.createElement(be,{elementId:n,typeKey:r});case"matrix":return o.a.createElement(Ne,null);case"table":return o.a.createElement(Ye,null);default:throw new Error("Unrecognised type of input when rendering editor pane")}}({display:t,elementId:n,typeKey:r}))):o.a.createElement($e,null)};t.default=Object(r.b)(function(e){return{dark:e.editor.dark,display:l(e),elementId:i(e),typeKey:c(e)}},null)(tt)}}]);
//# sourceMappingURL=13.890a0e72.chunk.js.map