(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{378:function(e,t,n){"use strict";n.d(t,"f",function(){return f}),n.d(t,"c",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"a",function(){return b}),n.d(t,"g",function(){return h}),n.d(t,"b",function(){return v}),n.d(t,"d",function(){return y}),n.d(t,"i",function(){return E}),n.d(t,"h",function(){return k});var r=n(62),a=n(2),i=n(14),c=n.n(i),l=n(435),o=n(4),u=n(0),s=n(15),d=n(101);function f(e,t,n){var r=n;switch(t){case u.cc:r=Object(a.a)({},r,{duration:"string"===typeof r.duration?Number.parseFloat(r.duration):r.duration})}return{type:s.p,id:e,key:t,values:r}}function m(e,t){return function(n,r){var a=r();if(a.editor.explorer.selected.id===e){var i=d.j(t),c={id:i.id,type:i,icon:i.icon,isSelected:!0,isExpanded:!0,label:i.name},u=[0,0];u.push(d.c(o.w(a.model),e,i)[0]),n(Object(l.c)(c,u))}n({type:s.c,id:e,key:t})}}function p(e,t){var n=d.j(t);return function(a,i){var c=i().model,l=o.w(c)[t].find(function(t){return t.id===e}),u=(l.id,l.reference,Object(r.a)(l,["id","reference"]));a(b(n,u))}}function b(e,t){var n=c()(),r=e.key;return function(a,i){var c=i().model,u=o.w(c),f=c.id,m=u.id;if(a({key:r,type:s.a,element:t||{},id:n}),i().model.programmes[0][r].find(function(e){return e.id===n})){var p=[0,0,d.c(u,n,e)[0],u[e.key].length],b={id:n,type:e,icon:e.icon,isSelected:!0,isExpanded:!0,label:t&&t.name?"".concat(t.name):"New ".concat(e.name)};a(Object(l.b)(f,!0)),a(Object(l.b)(m,!0)),a(Object(l.b)(e.id,!0)),a(Object(l.c)(b,p))}}}function h(e,t){switch(e){case u.n:case u.q:case u.Fc:case u.L:break;default:throw new Error("Unrecognised matrix type ".concat(e))}return{type:s.q,key:e,values:t}}function v(e,t,n,r){if(n===r)throw new Error("Source id cannot equal target id when adding phase link");var a;switch(t){case 0:a=u.ec;break;case 1:a=u.gc;break;case 2:a=u.dc;break;case 3:a=u.fc;break;default:throw new Error("Unknown phase link type integer")}return{type:s.b,id:e,linkType:a,sourceId:n,targetId:r}}function y(e){return{type:s.d,id:e}}function E(e,t,n){return{type:s.s,id:e,typeKey:t,values:n}}function k(e){return{type:s.r,model:e}}},435:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return s});var r=n(11),a=n(2),i=n(101),c=n(4),l=n(15),o=function(e,t){return{type:l.k,element:Object(a.a)({},e,{path:t})}},u=function(e,t){return{type:l.i,id:e,expanded:t}},s=function(e,t){return function(n,l){var s=l().model,d=c.w(s),f=s.id,m=d.id,p=Object(a.a)({},e,{type:t}),b=[0,0].concat(Object(r.a)(i.c(d,e.id,t)));n(u(f,!0)),n(u(m,!0)),n(u(t.id,!0)),n(o(p,b))}}},970:function(e,t,n){"use strict";n.r(t);var r=n(38),a=n(102),i=n(41),c=n(34),l=n(105),o=n(39),u=n(3),s=n.n(u),d=n(61),f=n(545),m=n(60),p=n(74),b=n(400),h=n(414),v=n(189),y=n(482),E=n(24),k=n(547),g=n(104),O=n(101),w=n(472),j=n(544),x=Object(d.b)(null,function(e){return{processFile:function(t){return e({type:"UPLOAD_MODEL",model:JSON.parse(t.target.result)})}}})(function(e){var t=e.open,n=e.onUpload,r=e.processFile;return s.a.createElement(w.a,{isOpen:t},s.a.createElement("div",{style:{padding:"10px"}},s.a.createElement(j.a,{text:"Choose model file",fill:!0,onInputChange:function(e){var t=new FileReader;t.onload=r;var a=e.target.files[0];t.readAsText(a),n()}})))}),_=n(378),C=n(2),S=(n(372),n(413));function M(e){return S.present_value(e)}function A(e){var t=S.value_for_money(e);return console.log(t),t}function I(e){return S.benefits_vs_phases(e)}function V(e){var t=S.benefits_vs_years(e),n={};return Object.keys(t).forEach(function(e){var r=Object.keys(t[e]);n[e]=r.reduce(function(n,r){if(void 0===n)return t[e][r];var a=[];return t[e][r].forEach(function(e,t){a.push(n[t]+e)}),a},void 0)}),n}function D(e){var t=S.costs_vs_years(e),n={};return Object.keys(t).forEach(function(e){var r=Object.keys(t[e]);n[e]=r.reduce(function(n,r){if(void 0===n)return t[e][r];var a=[];return t[e][r].forEach(function(e,t){a.push(n[t]+e)}),a},void 0)}),n}function L(e){return S.benefits_vs_deliverables(e)}function G(e){return S.benefits_vs_stakeholders(e)}function N(e){return S.benefits_vs_groups(e)}function P(e){return S.benefits_vs_measures(e)}function T(e){return S.deliverables_vs_stakeholders(e)}function R(e){return S.deliverables_vs_measures(e)}function U(e){return S.stakeholders_vs_groups(e)}var F=n(31),H=Object(d.b)(function(e){return{currentModel:e.model}},function(e,t){return{updateModel:function(t){try{var n=function(e){return Object(C.a)({},e,{results:Object(C.a)({},e.results,{dcf:M(e),vfm:A(e),benefitVsPhases:I(e),benefitSchedule:V(e),costSchedule:D(e),benefitVsDeliverables:L(e),benefitVsStakeholders:G(e),benefitVsGroups:N(e),benefitVsMeasures:P(e),deliverableVsStakeholders:T(e),deliverableVsMeasures:R(e),stakeholderVsGroups:U(e)})})}(t);e(Object(_.h)(n))}catch(r){throw console.error("Model Calculation Error:"),console.error(r),F.a.show({message:"An error occured whilst updating the model"}),r}}}})(function(e){var t=e.updateModel,n=e.currentModel;return s.a.createElement(p.b,{text:"Update Model",intent:E.a.SUCCESS,onClick:function(){return t(n)}})}),z=Object(u.lazy)(function(){return Promise.all([n.e(1),n.e(2),n.e(27)]).then(n.bind(null,971))}),q=Object(u.lazy)(function(){return Promise.all([n.e(1),n.e(2),n.e(24)]).then(n.bind(null,975))}),J=Object(u.lazy)(function(){return Promise.all([n.e(1),n.e(2),n.e(25)]).then(n.bind(null,976))}),K=Object(u.lazy)(function(){return Promise.all([n.e(1),n.e(2),n.e(26)]).then(n.bind(null,977))}),B=Object(u.lazy)(function(){return Promise.all([n.e(1),n.e(3),n.e(22)]).then(n.bind(null,959))}),Y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={active:"model",uploadVisible:!1},n.handleChangeActive=n.handleChangeActive.bind(Object(l.a)(n)),n.renderView=n.renderView.bind(Object(l.a)(n)),n.handleModelSelect=n.handleModelSelect.bind(Object(l.a)(n)),n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"handleChangeActive",value:function(e){this.setState({active:e})}},{key:"renderView",value:function(){switch(this.state.active){case"model":return s.a.createElement(z,{dark:this.props.dark});case"certainty":return s.a.createElement(K,{dark:this.props.dark});case"analysis":return s.a.createElement(q,{dark:this.props.dark});case"balancedScorecard":return s.a.createElement(J,{dark:this.props.dark});case"staging":return s.a.createElement(B,null);default:return s.a.createElement("div",null)}}},{key:"handleModelSelect",value:function(){console.log("hello")}},{key:"renderHeader",value:function(){var e=this;return s.a.createElement(f.a,{style:{backgroundColor:this.props.dark?"#30404d":"white"}},s.a.createElement(f.a.Group,{align:m.a.LEFT},s.a.createElement(f.a.Heading,null,s.a.createElement("div",{style:{height:"40px"}},s.a.createElement("img",{src:"logo.png",alt:"logo",style:{maxHeight:"100%"}}))),s.a.createElement(f.a.Divider,null),s.a.createElement(p.b,{className:"bp3-minimal",active:"model"===this.state.active,text:"Model Editor",onClick:function(){return e.handleChangeActive("model")}}),s.a.createElement(p.b,{className:"bp3-minimal",active:"certainty"===this.state.active,text:"Certainty",onClick:function(){return e.handleChangeActive("certainty")}}),s.a.createElement(p.b,{className:"bp3-minimal",active:"analysis"===this.state.active,text:"Analysis",onClick:function(){return e.handleChangeActive("analysis")}}),s.a.createElement(p.b,{className:"bp3-minimal",active:"balancedScorecard"===this.state.active,text:"Balanced Scorecard",onClick:function(){return e.handleChangeActive("balancedScorecard")}})),s.a.createElement(f.a.Group,{align:m.a.RIGHT},s.a.createElement(b.a,{content:s.a.createElement(h.a,null,s.a.createElement(h.a.Item,{text:"Logout",icon:"log-out"}),s.a.createElement(h.a.Item,{onClick:function(){return e.props.handleDarkModeToggle()},text:s.a.createElement("div",{style:{display:"flex"}},s.a.createElement(v.a,null,"Switch to ".concat(this.props.dark?"Light":"Dark"," Mode")),s.a.createElement(y.a,{style:{marginLeft:5},intent:this.props.dark?E.a.PRIMARY:E.a.DANGER},this.props.dark?"Stable":"Experimental"))}))},s.a.createElement(p.b,{text:this.props.user.displayName,rightIcon:"caret-down",icon:"user",style:{marginLeft:5},minimal:!0})),s.a.createElement(b.a,{content:s.a.createElement(h.a,null,s.a.createElement(h.a.Item,{text:"Import model from file",icon:"import",onClick:function(){return e.setState({uploadVisible:!0})}}),s.a.createElement(h.a.Item,{text:"Export data to file",icon:"export",onClick:function(){return O.a(e.props.model)}}),s.a.createElement(k.a,null),s.a.createElement(h.a.Item,{disabled:!0,text:s.a.createElement("div",{style:{display:"flex"}},s.a.createElement(v.a,null,"Import data from Excel VMT file"),s.a.createElement(y.a,{style:{marginLeft:5},intent:E.a.DANGER},"Experimental")),icon:"import"}))},s.a.createElement(p.b,{text:"Import/Export",rightIcon:"caret-down",icon:"import",style:{marginLeft:5},minimal:!0}))),s.a.createElement(f.a.Group,{align:m.a.RIGHT},s.a.createElement(H,null)))}},{key:"render",value:function(){var e=this;return document.body.className=this.props.dark?"bp3-dark":"bp3-body",s.a.createElement("div",{style:{width:"100%"}},s.a.createElement(x,{open:this.state.uploadVisible,onUpload:function(){return e.setState({uploadVisible:!1})}}),s.a.createElement("div",{style:{height:"50px",backgroundColor:"#a7b6c2"}},this.renderHeader()),s.a.createElement("div",{style:{height:"calc(100% - 50px)"}},s.a.createElement(u.Suspense,{fallback:s.a.createElement(g.a,{text:"Initialising..."})},this.renderView())))}}]),t}(u.Component);t.default=Object(d.b)(function(e){return{dark:e.editor.dark,model:e.model,user:e.auth.user,isAuthenticated:e.auth.isAuthenticated}},function(e){return{handleDarkModeToggle:function(){return e({type:"TOGGLE_DARK_MODE"})},updateModel:function(t){return e({type:"UPLOAD_MODEL",model:t})}}})(Y)}}]);
//# sourceMappingURL=17.63e63146.chunk.js.map