(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{411:function(e,t,r){"use strict";var a=r(3),n=r.n(a),c=r(376),i=r.n(c),o=r(377),l={top:10,right:10,left:10,bottom:10},s=i.a.scale(["#aeecae","#05587c"]);t.a=function(e){var t,r=e.data,a=e.display,c=e.width,i=e.height,d=e.syncId,u=e.goodThreshold,m=e.badThreshold;return n.a.createElement(o.g,{width:c,height:i},n.a.createElement(o.f,{data:r,syncId:d,margin:l},n.a.createElement(o.i,{dataKey:"date"}),n.a.createElement(o.j,null),n.a.createElement(o.c,{strokeDasharray:"3 3"}),n.a.createElement(o.h,null),"number"===typeof u&&(t=u,n.a.createElement(o.e,{type:"monotone",name:"Good Threshold",dataKey:function(){return t},strokeWidth:3,stroke:"#0f9960",dot:!1})),"number"===typeof m&&function(e){return n.a.createElement(o.e,{type:"monotone",strokeWidth:3,stroke:"#db3737",name:"Bad Threshold",dataKey:function(){return e},dot:!1})}(m),a.map(function(e,t){var r,c;return function(e,t,r){return n.a.createElement(o.e,{key:"SCORECARD_LINE_".concat(e),type:"monotone",strokeWidth:3,name:t,dataKey:e,stroke:r})}(e.dataKey,e.name,(r=t,c=a.length,s((r+1)/(c+1)).hex()))})))}},431:function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"c",function(){return c}),r.d(t,"a",function(){return i});var a=r(15),n=function(e){return{type:a.m,element:e}},c=function(e,t){return{type:a.n,id:e,expanded:t}},i=function(e){return{type:a.e,month:e}}},963:function(e,t,r){"use strict";r.r(t);var a=r(3),n=r.n(a),c=r(61),i=r(2),o=r(16),l=r(0),s=r(4);function d(e){for(var t=e.model,r=t.results.scorecard,a=s.y(t),n=12*t._analysisYears,c=[],i=0;i<n;i++)c.push({date:a.format("MM-YYYY"),root:r.root[i]}),a.add(1,"month");return c}function u(e,t){for(var r=e.model,a=r.results.scorecard,n=s.y(r),c=r._analysisYears,i=s.s(r,t),l=12*c,d=[],u=0;u<l;u++)d.push(Object(o.a)({date:n.format("MM-YYYY")},i.id,a.perspective[i.id][u])),n.add(1,"month");return d}function m(e){for(var t=e.model,r=t.results.scorecard,a=s.y(t),n=t._analysisYears,c=s.t(t),o=12*n,l=[],d=function(e){var t={};c.forEach(function(a){return t[a.id]=r.perspective[a.id][e]}),l.push(Object(i.a)({date:a.format("MM-YYYY")},t)),a.add(1,"month")},u=0;u<o;u++)d(u);return l}function f(e){var t=e.model;return s.t(t).map(function(e){return{dataKey:e.id,name:e.name}})}function h(e,t){var r=e.model,a=s.s(r,t);return[{dataKey:a.id,name:a.name}]}function p(e,t){for(var r=e.model,a=r.results.scorecard,n=s.y(r),c=r._analysisYears,i=s.o(r,t),l=12*c,d=[],u=0;u<l;u++)d.push(Object(o.a)({date:n.format("MM-YYYY")},i.id,a.objective[i.id][u])),n.add(1,"month");return d}function v(e,t){for(var r=e.model,a=r.results.scorecard,n=s.y(r),c=r._analysisYears,o=s.p(r).filter(function(e){return e.perspectiveId===t}),l=12*c,d=[],u=function(e){var t={};o.forEach(function(r){return t[r.id]=a.objective[r.id][e]}),d.push(Object(i.a)({date:n.format("MM-YYYY")},t)),n.add(1,"month")},m=0;m<l;m++)u(m);return d}function E(e,t){var r=e.model;return s.p(r).filter(function(e){return e.perspectiveId===t}).map(function(e){return{dataKey:e.id,name:e.name}})}function y(e,t){var r=e.model,a=s.o(r,t);return[{dataKey:a.id,name:a.name}]}function b(e,t){for(var r=e.model,a=r.results.scorecard,n=s.y(r),c=r._analysisYears,i=s.m(r,t),l=12*c,d=[],u=0;u<l;u++)d.push(Object(o.a)({date:n.format("MM-YYYY")},i.id,a.measure[i.id][u])),n.add(1,"month");return d}function g(e,t){for(var r=e.model,a=s.y(r),n=r._analysisYears,c=s.m(r,t),i=12*n,d=[],u=0;u<i;u++){var m=s.C(r,a.format(l.V),c.id);d.push(Object(o.a)({date:a.format("MM-YYYY")},c.id,m)),a.add(1,"month")}return d}function x(e,t){for(var r=e.model,a=r.results.scorecard,n=s.y(r),c=r._analysisYears,o=s.n(r).filter(function(e){return e.objectiveId===t}),l=12*c,d=[],u=function(e){var t={};o.forEach(function(r){return t[r.id]=a.measure[r.id][e]}),d.push(Object(i.a)({date:n.format("MM-YYYY")},t)),n.add(1,"month")},m=0;m<l;m++)u(m);return d}function j(e,t){var r=e.model;return s.n(r).filter(function(e){return e.objectiveId===t}).map(function(e){return{dataKey:e.id,name:e.name}})}function R(e,t){var r=e.model,a=s.m(r,t);return[{dataKey:a.id,name:a.name}]}function w(e){var t=e.scorecard.strategyMap.selected;if(!t)return"blank";switch(t.type){case l.Ac:return"scorecard-rag";case l.Vb:return"perspective-rag";case l.Lc:return"data";case l.Pc:return"strategicLevel";case l.ub:return"measure";case l.Eb:return"objective";case l.Rb:return"perspective";default:throw new Error("Unrecognised selected element ".concat(t.type))}}function A(e){var t=e.scorecard.strategyMap.selected;return t?t.type===l.Vb?t.perspectiveId:t.id:void 0}function D(e,t){var r=e.model;return s.m(r,t).standard}function M(e,t){var r=e.model;return s.m(r,t).minimumStandard}var C=r(372),I=r(11),O=r(956),S=r(638);function T(e,t){var r=e.model;return s.n(r).map(function(e){return{name:e.name,unitOfMeasure:e.unitOfMeasure,best:Math.round(100*e.best)/100,worst:Math.round(100*e.worst)/100,standard:Math.round(100*e.standard)/100,minimumStandard:Math.round(100*e.minimumStandard)/100,baselineValue:Math.round(100*e.baselineValue)/100,value:s.C(r,t,e.id)}})}r(955);var Y=function(e,t){return[{Header:"Measure Name",accessor:"name"},{Header:"Unit of Measure",accessor:"unitOfMeasure",maxWidth:120},{Header:"Best Value",accessor:"best",maxWidth:120},{Header:"Worst Value",accessor:"worst",maxWidth:120},{Header:"Standard",accessor:"standard",maxWidth:120},{Header:"Minimum Standard",accessor:"minimumStandard",maxWidth:120},{Header:"Baseline Value",accessor:"baselineValue",maxWidth:120},{Header:"Value",accessor:"value",Cell:_(e,t),maxWidth:300}]},_=function(e,t){return function(r){var a=e[r.index][r.column.id];return n.a.createElement("div",{style:{margin:"3px"}},n.a.createElement(S.a,{fill:!0,onChange:function(a){var n=Object(I.a)(e);n[r.index][r.column.id]=a.target.innerHTML,t(n)},value:a,allowNumericCharactersOnly:!1}))}},k=function(e,t,r,a){return{style:{padding:"value"===r.id?"0px":void 0,textAlign:"name"===r.id?"left":"center"}}},N=Object(c.b)(function(e,t){return{values:T(e,t.date)}},null)(function(e){var t=e.values,r=n.a.useState(t),a=Object(C.a)(r,2),c=a[0],i=a[1];return n.a.createElement("div",{style:{overflow:"scroll",height:"100%"}},n.a.createElement(O.a,{data:c,columns:Y(c,i),defaultPageSize:t.length,showPagination:!1,className:"-highlight",getTdProps:k}))}),L=r(74),W=r(24),B=r(431);function G(e){var t=e.model,r=e.scorecard;if(r.activeMonth)return r.activeMonth;var a=s.y(t);return{date:a.format(l.V),text:a.format("MMMM YYYY")}}function V(e){for(var t=e.model._analysisYears,r=e.model,a=s.y(r),n=[],c=0;c<t;c++)for(var i=0;i<12;i++)n.push({date:a.format(l.V),text:a.format("MMMM YYYY")}),a.add(1,"month");return n}var U=r(62),F=r(415),H=r(108),K=r(60),P=r(960),z={display:"inline-block"},J={display:"inline-block",marginRight:"10px"},q=function(e){return function(t,r){var a=r.handleClick;return n.a.createElement(F.a,{key:"BALANCE_SCORECARD_MONTH_SELECT_".concat(t.date),text:t.text,active:e.date===t.date,onClick:a})}},Q=function(e){var t=e.months,r=e.active,a=e.handleChange;Object(U.a)(e,["months","active","handleChange"]);return n.a.createElement("div",{style:z},n.a.createElement(P.a,{items:t,itemRenderer:q(r),onItemSelect:function(e){return a(e)},onActiveItemChange:function(e){return a(e)},activeItem:r,filterable:!1},n.a.createElement("div",{style:J},"Select Month:"),n.a.createElement(H.a,{style:{width:"175px"}},n.a.createElement(L.b,{fill:!0,small:!0,intent:W.a.PRIMARY,rightIcon:"caret-down",alignText:K.a.LEFT,text:r.text}))))},X=Object(c.b)(function(e){return{months:V(e),active:G(e)}},function(e){return{handleChange:function(t){return e(Object(B.a)(t))}}})(Q),Z=function(){return n.a.createElement("div",{style:{minHeight:"25px",paddingBottom:"10px"}},n.a.createElement(X,null),n.a.createElement(L.b,{intent:W.a.SUCCESS,text:"Save Changes",small:!0,style:{display:"inline-block",float:"right"}}))},$=function(e){return{position:"absolute",padding:"10px 10px 0 10px",top:0,left:0,zIndex:1,width:"calc(100% - 10px)",borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:"#00000030",backgroundColor:e?"rgb(48, 64, 77)":"white"}},ee={position:"relative",top:"50px",padding:"0 5px 10px"},te=Object(c.b)(function(e){return{date:G(e).date}},null)(function(e){var t=e.dark,r=e.date;return n.a.createElement("div",null,n.a.createElement("div",{style:$(t)},n.a.createElement(Z,null)),n.a.createElement("div",{style:ee},n.a.createElement(N,{date:r})))}),re=r(411),ae=[{dataKey:"root",name:"Strategic Level"}],ne=Object(c.b)(function(e){return{topLevelData:d(e),perspectiveData:m(e),perspectiveDisplay:f(e)}},null)(function(e){var t=e.topLevelData,r=e.perspectiveData,a=e.perspectiveDisplay;return n.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",padding:"20px 50px",justifyContent:"space-around"}},n.a.createElement(re.a,{data:t,display:ae,goodThreshold:6.66,badThreshold:3.33,width:"100%",height:"45%",syncId:"strategic-level-sync"}),n.a.createElement(re.a,{data:r,display:a,goodThreshold:6.66,badThreshold:3.33,width:"100%",height:"45%",syncId:"strategic-level-sync"}))}),ce=Object(c.b)(function(e,t){return{perspectiveData:u(e,t.perspectiveId),objectivesData:v(e,t.perspectiveId),objectivesDisplay:E(e,t.perspectiveId),perspectiveDisplay:h(e,t.perspectiveId)}},null)(function(e){var t=e.perspectiveData,r=e.objectivesData,a=e.perspectiveDisplay,c=e.objectivesDisplay;return n.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",padding:"20px 50px",justifyContent:"space-around"}},n.a.createElement(re.a,{data:t,display:a,goodThreshold:6.66,badThreshold:3.33,width:"100%",height:"45%",syncId:"perspective-level-sync"}),n.a.createElement(re.a,{data:r,display:c,goodThreshold:6.66,badThreshold:3.33,width:"100%",height:"45%",syncId:"perspective-level-sync"}))}),ie=Object(c.b)(function(e,t){return{objectiveData:p(e,t.objectiveId),measuresData:x(e,t.objectiveId),measuresDisplay:j(e,t.objectiveId),objectiveDisplay:y(e,t.objectiveId)}},null)(function(e){var t=e.objectiveData,r=e.measuresData,a=e.objectiveDisplay,c=e.measuresDisplay;return n.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",padding:"20px 50px",justifyContent:"space-around"}},n.a.createElement(re.a,{data:t,display:a,goodThreshold:6.66,badThreshold:3.33,width:"100%",height:"45%",syncId:"objective-level-sync"}),n.a.createElement(re.a,{data:r,display:c,goodThreshold:6.66,badThreshold:3.33,width:"100%",height:"45%",syncId:"objective-level-sync"}))}),oe=r(376),le=r.n(oe),se=r(377),de={top:10,right:10,left:10,bottom:10},ue=le.a.scale(["#aeecae","#05587c"]),me=function(e){var t,r=e.data,a=e.display,c=e.width,i=e.height,o=e.syncId,l=e.standard,s=e.minimumStandard;return n.a.createElement(se.g,{width:c,height:i},n.a.createElement(se.f,{data:r,syncId:o,margin:de},n.a.createElement(se.i,{dataKey:"date"}),n.a.createElement(se.j,null),n.a.createElement(se.c,{strokeDasharray:"3 3"}),n.a.createElement(se.h,null),"number"===typeof l&&(t=l,n.a.createElement(se.e,{type:"monotone",name:"Standard",dataKey:function(){return t},strokeWidth:1,stroke:"#0f9960",dot:!1})),"number"===typeof s&&function(e){return n.a.createElement(se.e,{type:"monotone",strokeWidth:1,stroke:"#db3737",name:"Minimum Standard",dataKey:function(){return e},dot:!1})}(s),a.map(function(e,t){var r,c;return function(e,t,r){return n.a.createElement(se.e,{key:"VALUE_LINE_".concat(e),type:"monotone",strokeWidth:3,name:t,dataKey:e,stroke:r})}(e.dataKey,e.name,(r=t,c=a.length,ue((r+1)/(c+1)).hex()))})))},fe=Object(c.b)(function(e,t){return{measureScoreData:b(e,t.measureId),measureValueData:g(e,t.measureId),measureDisplay:R(e,t.measureId),standard:D(e,t.measureId),minimumStandard:M(e,t.measureId)}},null)(function(e){var t=e.measureScoreData,r=e.measureValueData,a=e.measureDisplay,c=e.standard,i=e.minimumStandard;return n.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",padding:"20px 50px",justifyContent:"space-around"}},n.a.createElement(re.a,{data:t,display:a,goodThreshold:6.66,badThreshold:3.33,width:"100%",height:"45%",syncId:"measure-level-sync"}),n.a.createElement(me,{data:r,display:a,standard:c,minimumStandard:i,width:"100%",height:"45%",syncId:"measure-level-sync"}))}),he=r(5),pe=r.n(he);function ve(e){var t=e.model,r=e.scorecard;if(r.activeMonth)return r.activeMonth;var a=s.y(t);return{date:a.format(l.V),text:a.format("MMMM YYYY")}}function Ee(e){for(var t=e.model._analysisYears,r=e.model,a=s.y(r),n=[],c=0;c<t;c++)for(var i=0;i<12;i++)n.push({date:a.format(l.V),text:a.format("MMMM YYYY")}),a.add(1,"month");return n}function ye(e,t){return s.p(e.model).filter(function(e){return e.perspectiveId===t})}function be(e,t){return e.name.toLowerCase()===l.Tb[0]?-1:e.name.toLowerCase()===l.Tb[1]?t.name.toLowerCase()===l.Tb[0]?1:-1:e.name.toLowerCase()===l.Tb[2]?l.Tb.slice(0,2).includes(t.name.toLowerCase())?1:-1:e.name.toLowerCase()===l.Tb[3]?l.Tb.slice(0,3).includes(t.name.toLowerCase())?1:-1:e.name.toLowerCase()===l.Tb[4]?l.Tb.slice(0,4).includes(t.name.toLowerCase())?1:-1:l.Tb.includes(t.name.toLowerCase())?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:1}function ge(e){return function e(t){var r=t.length;if(0===r)return[];if(r<=4)return[[void 0,t[0],void 0],[t[1],void 0,t[2]],[void 0,t[3],void 0]].filter(function(e){return e[0]||e[1]||e[2]});if(r<=9)return[[t[5],t[0],t[6]],[t[4],t[1],t[2]],[t[7],t[3],t[8]]].filter(function(e){return e[0]||e[1]||e[2]});var a=e(t.slice(0,9)),n=t.slice(9),c=[void 0,void 0,void 0];return n.forEach(function(e,t){switch(t%3){case 0:c[1]=e;break;case 1:c[0]=e;break;case 2:c[2]=e}t%3!==2&&n.length-1!==t||(a.push(c),c=[void 0,void 0,void 0])}),a}(function(e){return s.t(e.model)}(e).sort(be))}function xe(e){for(var t=ve(e),r=pe()(t.date,l.V,!0),a=s.x(e.model),n=[],c=4;!r.isBefore(a)&&0!==c;)n.push(r.format(l.V)),r.subtract(1,"month"),c--;return n.reverse()}function je(e,t){var r=s.x(e.model),a=e.model.results.scorecard.objective,n=ye(e,t),c=xe(e),i={};return n.forEach(function(e){var t={};c.forEach(function(n){var c=pe()(n,l.V,!0).diff(r,"months");a[e.id]?t[n]=a[e.id][c]:t[n]=0}),i[e.id]=t}),i}function Re(e,t){var r=ye(e,t),a=je(e,t),n=xe(e),c=n[n.length-1],i={};return r.forEach(function(e){var t=a[e.id][c];i[e.id]=0===t?"DEFAULT":t<10/3?"RED":t<20/3?"AMBER":"GREEN"}),i}function we(e,t){var r=s.x(e.model),a=xe(e),n=a[a.length-1],c=pe()(n,l.V,!0).diff(r,"months"),i=e.model.results.scorecard.perspective;return i[t]?i[t][c]:0}function Ae(e,t){var r=we(e,t);return 0===r?"DEFAULT":r<10/3?"RED":r<20/3?"AMBER":"GREEN"}function De(e){var t=xe(e),r=e.model.results.scorecard.root,a=s.x(e.model);return t.map(function(e){var t=pe()(e,l.V,!0).diff(a,"months");return r[t]})}function Me(e){var t=De(e),r=t[t.length-1];return 0===r?"DEFAULT":r<10/3?"RED":r<20/3?"AMBER":"GREEN"}var Ce=r(385),Ie=r(482),Oe=r(588),Se=r(189),Te=r(591),Ye="#C23030",_e="#F29D49",ke="#29A634",Ne="#BFCCD6",Le={width:"30%",marginRight:"1%"},We={borderStyle:"solid",borderWidth:"2px",borderColor:Ne},Be={display:"inline-block",color:Ne},Ge={borderStyle:"solid",borderWidth:"2px",borderColor:Ye},Ve={display:"inline-block",color:Ye},Ue={borderStyle:"solid",borderWidth:"2px",borderColor:_e},Fe={display:"inline-block",color:_e},He={borderStyle:"solid",borderWidth:"2px",borderColor:ke},Ke={display:"inline-block",color:ke},Pe={overflow:"auto",height:"calc(100% - 20px)"},ze={textAlign:"center"};function Je(e,t){if(!t)return Le;switch(e){case"RED":return Object(i.a)({},Le,Ge);case"AMBER":return Object(i.a)({},Le,Ue);case"GREEN":return Object(i.a)({},Le,He);case"DEFAULT":default:return Object(i.a)({},Le,We)}}function qe(e){switch(e){case"RED":return Ye;case"AMBER":return _e;case"GREEN":return ke;case"DEFAULT":default:return Ne}}function Qe(e){var t=Math.round(100*e);return"".concat(t,"%")}var Xe=function(e){var t=e.perspectiveId,r=e.labels,a=e.style,c=e.active?qe(a):"grey";return n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{style:{textAlign:"center",color:c}},"%"),n.a.createElement("th",{style:{color:c}},"Objective"),r.map(function(e){return n.a.createElement("th",{key:"RAG_VIEW_".concat(t,"_").concat(e),style:{textAlign:"center",color:c}},e)})))},Ze=function(e,t,r,a,c,o){return function(l){var s=t[l.id],d=a[l.id],u=o.measures.map(function(e){var t=c.find(function(t){return t.id===e});if(!t)throw new Error("Could not rehydrate measure from theme measure id");return t.objectiveId}),m=u.includes(l.id)?qe(d):"grey",f=u.includes(l.id)?"bold":"normal";return n.a.createElement("tr",{key:"RAG_VIEW_".concat(e,"_").concat(l.id)},n.a.createElement("td",{style:{textAlign:"center",color:m,fontWeight:f}},Qe(l.weighting)),n.a.createElement("td",{style:{color:m,fontWeight:f}},n.a.createElement(Se.a,{ellipsize:!0},l.name)),r.map(function(e,t,r,a){return function(c,o){return n.a.createElement("td",{style:Object(i.a)({},ze,{color:r,fontWeight:a}),key:"RAG_VIEW_".concat(e,"_").concat(o)},t[c])}}(l.id,s,m,f)))}},$e=function(e){var t=e.perspectiveId,r=e.perspectiveStyle,a=e.objectives,c=e.objectiveStyles,i=e.measures,o=e.dates,s=e.values,d=e.active,u=e.theme,m=function(e){return e.map(function(e){return pe()(e,l.V,!0).format("MMM YY")})}(o);return n.a.createElement(Te.a,null,n.a.createElement(Xe,{perspectiveId:t,labels:m,style:r,active:d}),n.a.createElement("tbody",null,a.map(Ze(t,s,o,c,i,u))))},et=function(e){var t=e.style,r=e.name,a=e.weight,c=e.active,o=e.score,l=function(e,t){if(!t)return Object(i.a)({},Be,{color:"grey"});switch(e){case"RED":return Ve;case"AMBER":return Fe;case"GREEN":return Ke;case"DEFAULT":default:return Be}}(t,c),s=function(e,t){if(!t)return W.a.NONE;switch(e){case"RED":return W.a.DANGER;case"AMBER":return W.a.WARNING;case"GREEN":return W.a.SUCCESS;case"DEFAULT":default:return W.a.NONE}}(t,c);return n.a.createElement("div",null,n.a.createElement(Ce.e,{style:l},"".concat(r," (").concat(Qe(a),") - Score: ").concat(o)),n.a.createElement(Ie.a,{style:{marginBottom:"-5px",marginLeft:"10px"},intent:s},function(e){switch(e){case"RED":return"Red";case"AMBER":return"Amber";case"GREEN":return"Green";case"DEFAULT":default:return"No Data"}}(t)))},tt=function(e){var t=e.perspective,r=e.perspectiveStyle,a=Object(U.a)(e,["perspective","perspectiveStyle"]),c=a.objectives.reduce(function(e,t){return!!e||a.measures.filter(function(e){return e.objectiveId===t.id}).reduce(function(e,t){return e||a.theme.measures.includes(t.id)},!1)},!1);return n.a.createElement(Oe.a,{style:Je(r,c)},n.a.createElement(et,{style:r,name:t.name,weight:t.weighting,active:c,score:a.score}),n.a.createElement("div",{style:Pe},n.a.createElement($e,Object.assign({perspectiveId:t.id,perspectiveStyle:r,active:c},a))))},rt=Object(c.b)(function(e,t){return{score:we(e,t.perspective.id),perspectiveStyle:Ae(e,t.perspective.id),objectives:ye(e,t.perspective.id),objectiveStyles:Re(e,t.perspective.id),measures:Object(s.n)(e.model),dates:xe(e),values:je(e,t.perspective.id)}},null)(tt),at=function(e){return{position:"absolute",padding:"10px 10px 0 10px",top:0,left:0,zIndex:1,width:"calc(100% - 10px)",borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:"#00000030",backgroundColor:e?"rgb(48, 64, 77)":"white"}},nt={position:"relative",top:"50px",padding:"0 5px 10px",height:"calc(100% - 50px)",width:"100%"},ct={display:"flex",justifyContent:"space-around",marginBottom:"10px",minHeight:"calc((100% - 30px) / 3)",maxHeight:"calc((100% - 30px) / 3)"},it={width:"30%",marginRight:"1%"},ot=Object(c.b)(function(e){return{months:Ee(e),active:ve(e)}},function(e){return{handleChange:function(t){return e(Object(B.a)(t))}}})(Q),lt=r(32),st=function(e){return function(t,r){var a=r.handleClick;return n.a.createElement(F.a,{key:"THEME_SELECT_VALUE_".concat(t.id),text:t.name,active:t.id===e.id,onClick:a})}},dt=Object(c.b)(function(e){return{themes:e.model.programmes[0].themes,measures:e.model.programmes[0].measures}},null)(function(e){var t=e.themes,r=e.measures,a=e.active,c=e.handleChange,i=[Object(l.tc)(r)].concat(Object(I.a)(t));return n.a.createElement("div",{style:{display:"inline-block",marginLeft:"5px"}},n.a.createElement(P.a,{items:i,itemRenderer:st(a),onItemSelect:function(e){return c(e)},onActiveItemChange:function(e){return c(e)},activeItem:a,popoverProps:{position:lt.a.RIGHT_BOTTOM},filterable:!1},n.a.createElement("div",{style:{display:"inline-block",marginLeft:"7px",marginRight:"10px"}},"Select Theme:"),n.a.createElement(H.a,{style:{width:"130px"}},n.a.createElement(L.b,{fill:!0,small:!0,intent:W.a.PRIMARY,rightIcon:"caret-down",alignText:K.a.LEFT,text:a.name}))))});function ut(e){switch(e){case"RED":return W.a.DANGER;case"AMBER":return W.a.WARNING;case"GREEN":return W.a.SUCCESS;case"DEFAULT":default:return W.a.NONE}}var mt=function(e){var t=e.style,r=e.values;return n.a.createElement("div",{style:{float:"right",display:"flex",flexDirection:"row"}},n.a.createElement("div",{style:{marginRight:"10px"}},"Scorecard:"),r.map(function(e,t){return n.a.createElement("div",{key:"SCORECARD_RAG_DATUM_".concat(t),style:{marginRight:"10px"}},e)}),n.a.createElement(Ie.a,{style:{marginLeft:"5px"},intent:ut(t)},function(e){switch(e){case"RED":return"Red";case"AMBER":return"Amber";case"GREEN":return"Green";case"DEFAULT":default:return"No Data"}}(t)))},ft=Object(c.b)(function(e){return{style:Me(e),values:De(e)}},null)(function(e){var t=e.values,r=e.activeTheme,a=e.setActiveTheme,c=e.style;return n.a.createElement("div",{style:{minHeight:"25px",paddingBottom:"10px"}},n.a.createElement(ot,null),n.a.createElement(dt,{active:r,handleChange:a}),n.a.createElement(mt,{style:c,values:t}))}),ht=function(){return n.a.createElement("div",{style:it})},pt=function(e){var t=e.children;return n.a.createElement("div",{style:ct},t)},vt=Object(c.b)(function(e){return{layout:ge(e),dates:xe(e),measures:Object(s.n)(e.model)}},null)(function(e){var t=e.dark,r=e.layout,a=e.measures,c=n.a.useState(Object(l.tc)(a)),i=Object(C.a)(c,2),o=i[0],s=i[1];return n.a.createElement("div",{style:{height:"100%"}},n.a.createElement("div",{style:at(t)},n.a.createElement(ft,{activeTheme:o,setActiveTheme:s})),n.a.createElement("div",{style:nt},r.map(function(e,t){return n.a.createElement(pt,{key:"SCORECARD_RAG_VIEW_ROW_".concat(t)},e.map((r=o,function(e,t){return e?n.a.createElement(rt,{key:"SCORECARD_RAG_VIEW_CARD_".concat(e.id),perspective:e,theme:r}):n.a.createElement(ht,{key:"SCORECARD_RAG_VIEW_BLANK_CARD_".concat(t)})})));var r})))});function Et(e){var t=e.model,r=e.scorecard;if(r.activeMonth)return r.activeMonth;var a=s.y(t);return{date:a.format(l.V),text:a.format("MMMM YYYY")}}function yt(e){for(var t=e.model._analysisYears,r=e.model,a=s.y(r),n=[],c=0;c<t;c++)for(var i=0;i<12;i++)n.push({date:a.format(l.V),text:a.format("MMMM YYYY")}),a.add(1,"month");return n}function bt(e,t){return s.p(e.model).filter(function(e){return e.perspectiveId===t})}function gt(e,t){return s.n(e.model).filter(function(e){return e.objectiveId===t})}function xt(e,t){var r=s.x(e.model),a=Et(e).date,n=pe()(a,l.V,!0).diff(r,"months"),c=gt(e,t),i=e.model.results.scorecard.measure,o={};return c.forEach(function(e){i[e.id]?o[e.id]=i[e.id][n]:o[e.id]=0}),o}function jt(e,t){var r=gt(e,t),a=Et(e).date,n={};return r.forEach(function(t){n[t.id]=s.C(e.model,a,t.id)}),n}function Rt(e,t){var r=gt(e,t),a=xt(e,t),n={};return r.forEach(function(e){var t=a[e.id];n[e.id]=0===t?"DEFAULT":t<10/3?"RED":t<20/3?"AMBER":"GREEN"}),n}function wt(e,t){var r=s.x(e.model),a=e.model.results.scorecard.objective,n=Et(e).date,c=pe()(n,l.V,!0).diff(r,"months");return a[t]?a[t][c]:0}function At(e,t){var r=wt(e,t);return 0===r?"DEFAULT":r<10/3?"RED":r<20/3?"AMBER":"GREEN"}function Dt(e,t){var r=s.x(e.model),a=e.model.results.scorecard.perspective,n=Et(e).date,c=pe()(n,l.V,!0).diff(r,"months");return a[t]?a[t][c]:0}function Mt(e,t){var r=Dt(e,t);return 0===r?"DEFAULT":r<10/3?"RED":r<20/3?"AMBER":"GREEN"}function Ct(e,t){return s.s(e.model,t).name}var It="#C23030",Ot="#F29D49",St="#29A634",Tt="#BFCCD6",Yt={width:"48%",marginBottom:"10px"},_t={borderStyle:"solid",borderWidth:"2px",borderColor:Tt},kt={display:"inline-block",color:Tt},Nt={borderStyle:"solid",borderWidth:"2px",borderColor:It},Lt={display:"inline-block",color:It},Wt={borderStyle:"solid",borderWidth:"2px",borderColor:Ot},Bt={display:"inline-block",color:Ot},Gt={borderStyle:"solid",borderWidth:"2px",borderColor:St},Vt={display:"inline-block",color:St},Ut={overflow:"auto",height:"calc(100% - 20px)"},Ft={textAlign:"center"};function Ht(e){var t=Math.round(100*e);return"".concat(t,"%")}function Kt(e){switch(e){case"RED":return It;case"AMBER":return Ot;case"GREEN":return St;case"DEFAULT":default:return Tt}}function Pt(e,t){if(!t)return Yt;switch(e){case"RED":return Object(i.a)({},Yt,Nt);case"AMBER":return Object(i.a)({},Yt,Wt);case"GREEN":return Object(i.a)({},Yt,Gt);case"DEFAULT":default:return Object(i.a)({},Yt,_t)}}var zt=function(e){e.objectiveId;var t=e.style,r=e.active?Kt(t):"grey";return n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{style:{textAlign:"center",color:r}},"%"),n.a.createElement("th",{style:{color:r}},"Measure"),n.a.createElement("th",{style:{color:r}},"Unit of Measure"),n.a.createElement("th",{style:{textAlign:"center",color:r}},"Score"),n.a.createElement("th",{style:{textAlign:"center",color:r}},"Value")))},Jt=function(e){var t=e.objectiveId,r=e.measures,a=e.scores,c=e.values,o=e.measureStyles,l=e.objectiveStyle,s=e.active,d=e.theme;return n.a.createElement(Te.a,null,n.a.createElement(zt,{active:s,objectiveId:t,style:l}),n.a.createElement("tbody",null,r.map(function(e,t,r,a,c){return function(o){var l=a[o.id],s=c.measures.includes(o.id)?Kt(l):"grey",d=c.measures.includes(o.id)?"bold":"normal";return n.a.createElement("tr",{key:"RAG_VIEW_".concat(e,"_").concat(o.id)},n.a.createElement("td",{style:{textAlign:"center",color:s,fontWeight:d}},Ht(o.weighting)),n.a.createElement("td",{style:{color:s,fontWeight:d}},n.a.createElement(Se.a,{ellipsize:!0},o.name)),n.a.createElement("td",{style:Object(i.a)({},Ft,{color:s,fontWeight:d})},n.a.createElement(Se.a,{ellipsize:!0},o.unitOfMeasure)),n.a.createElement("td",{style:Object(i.a)({},Ft,{color:s,fontWeight:d})},t[o.id]),n.a.createElement("td",{style:Object(i.a)({},Ft,{color:s,fontWeight:d})},r[o.id]))}}(t,a,c,o,d))))},qt=function(e){var t=e.active,r=e.style,a=e.name,c=e.weight,o=e.score,l=function(e,t){if(!t)return Object(i.a)({},kt,{color:"grey"});switch(e){case"RED":return Lt;case"AMBER":return Bt;case"GREEN":return Vt;case"DEFAULT":default:return kt}}(r,t),s=function(e,t){if(!t)return W.a.NONE;switch(e){case"RED":return W.a.DANGER;case"AMBER":return W.a.WARNING;case"GREEN":return W.a.SUCCESS;case"DEFAULT":default:return W.a.NONE}}(r,t);return n.a.createElement("div",null,n.a.createElement(Ce.e,{style:l},"".concat(a," (").concat(Ht(c),") - Score: ").concat(o)),n.a.createElement(Ie.a,{style:{marginBottom:"-5px",marginLeft:"10px"},intent:s},function(e){switch(e){case"RED":return"Red";case"AMBER":return"Amber";case"GREEN":return"Green";case"DEFAULT":default:return"No Data"}}(r)))},Qt=function(e){var t=e.objective,r=e.objectiveStyle,a=Object(U.a)(e,["objective","objectiveStyle"]),c=a.measures.reduce(function(e,t){return e||a.theme.measures.includes(t.id)},!1);return n.a.createElement(Oe.a,{style:Pt(r,c)},n.a.createElement(qt,{active:c,style:r,name:t.name,weight:t.weighting,score:a.score}),n.a.createElement("div",{style:Ut},n.a.createElement(Jt,Object.assign({active:c,objectiveId:t.id,objectiveStyle:r},a))))},Xt=Object(c.b)(function(e,t){return{score:wt(e,t.objective.id),objectiveStyle:At(e,t.objective.id),measures:gt(e,t.objective.id),measureStyles:Rt(e,t.objective.id),scores:xt(e,t.objective.id),values:jt(e,t.objective.id)}},null)(Qt),Zt=function(e){return{position:"absolute",padding:"10px 10px 0 10px",top:0,left:0,zIndex:1,width:"calc(100% - 10px)",borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:"#00000030",backgroundColor:e?"rgb(48, 64, 77)":"white"}},$t={position:"relative",top:"50px",padding:"0 5px 10px",height:"calc(100% - 50px)",width:"100%"},er={display:"flex",justifyContent:"space-around",marginBottom:"10px",minHeight:"calc((100% - 30px) / 3)",maxHeight:"calc((100% - 30px) / 3)"},tr=Object(c.b)(function(e){return{months:yt(e),active:Et(e)}},function(e){return{handleChange:function(t){return e(Object(B.a)(t))}}})(Q);function rr(e){switch(e){case"RED":return W.a.DANGER;case"AMBER":return W.a.WARNING;case"GREEN":return W.a.SUCCESS;case"DEFAULT":default:return W.a.NONE}}var ar=function(e){var t=e.style,r=e.score,a=e.name;return n.a.createElement("div",{style:{float:"right",display:"flex",flexDirection:"row"}},n.a.createElement("div",{style:{marginRight:"10px"}},"".concat(a,":")),n.a.createElement("div",{key:"PERSPECTIVE_RAG_DATUM",style:{marginRight:"10px"}},r),n.a.createElement(Ie.a,{style:{marginLeft:"5px"},intent:rr(t)},function(e){switch(e){case"RED":return"Red";case"AMBER":return"Amber";case"GREEN":return"Green";case"DEFAULT":default:return"No Data"}}(t)))},nr=Object(c.b)(function(e,t){return{name:Ct(e,t.perspectiveId),score:Dt(e,t.perspectiveId),style:Mt(e,t.perspectiveId)}},null)(function(e){return n.a.createElement("div",{style:{minHeight:"25px",paddingBottom:"10px"}},n.a.createElement(tr,null),n.a.createElement(dt,{active:e.activeTheme,handleChange:e.setActiveTheme}),n.a.createElement(ar,e))}),cr=function(e){var t=e.children;return n.a.createElement("div",{style:er},t)},ir=Object(c.b)(function(e,t){return{objectives:bt(e,t.perspectiveId),measures:Object(s.n)(e.model)}},null)(function(e){var t=e.dark,r=e.objectives,a=e.perspectiveId,c=e.measures,i=n.a.useState(Object(l.tc)(c)),o=Object(C.a)(i,2),s=o[0],d=o[1];return n.a.createElement("div",{style:{height:"100%"}},n.a.createElement("div",{style:Zt(t)},n.a.createElement(nr,{perspectiveId:a,activeTheme:s,setActiveTheme:d})),n.a.createElement("div",{style:$t},function(e,t){var r,a,c=[];for(r=0,a=e.length;r<a;r+=2)c.push(e.slice(r,r+2));return c.map(function(e,r){return n.a.createElement(cr,{key:"PERSPECTIVE_RAG_VIEW_ROW_".concat(r)},e.map(function(e){return n.a.createElement(Xt,{key:"PERSPECTIVE_RAG_VIEW_".concat(e.id),objective:e,theme:t})}))})}(r,s)))});t.default=Object(c.b)(function(e){return{display:w(e),selectedId:A(e)}},null)(function(e){var t=e.display,r=e.selectedId;return n.a.createElement("div",{style:{width:"100%",height:"100%"}},function(e,t){switch(e){case"blank":return n.a.createElement("div",null);case"scorecard-rag":return n.a.createElement(vt,null);case"perspective-rag":return n.a.createElement(ir,{perspectiveId:t});case"data":return n.a.createElement(te,null);case"strategicLevel":return n.a.createElement(ne,null);case"perspective":if("string"!==typeof t)throw new Error("Perspective was selected but no id was provided when rendering graph");return n.a.createElement(ce,{perspectiveId:t});case"objective":if("string"!==typeof t)throw new Error("Objective was selected but no id was provided when rendering graph");return n.a.createElement(ie,{objectiveId:t});case"measure":if("string"!==typeof t)throw new Error("Measure was selected but no id was provided when rendering graph");return n.a.createElement(fe,{measureId:t});default:throw new Error("Unrecognised display type when rendering scorecard content")}}(t,r))})}}]);
//# sourceMappingURL=19.948d5e81.chunk.js.map