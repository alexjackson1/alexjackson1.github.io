(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{409:function(e,t,n){"use strict";var r=n(372),a=n(11),i=n(16),l=n(2),o=n(3),c=n.n(o),u=n(74),s=n(24),d=n(961),m=n(937),f=n(938),h=n(964),p=function(e,t,n){return e[t][n]},v=function(e,t,n,r){return[e[n].id,t[r].id]},b=function(e,t,n,r,o){return function(u,s){return c.a.createElement(d.a,{onConfirm:function(a,c,u){return function(e,t,n,r,a,o,c,u){var s=v(n,r,a,o);Number.parseFloat(e)!==t[s[0]][s[1]]&&u(!0),c(Object(l.a)({},t,Object(i.a)({},s[0],Object(l.a)({},t[s[0]],Object(i.a)({},s[1],Number.parseFloat(e))))))}(a,e,t,n,c,u,r,o)},rowIndex:u,columnIndex:s,value:p.apply(void 0,[e].concat(Object(a.a)(v(t,n,u,s))))})}},g=function(e){return function(t){return c.a.createElement(m.a,null,e[t].name)}};t.a=function(e){var t=e.x,n=e.y,a=e.handleSubmit,i=e.typeKey,l=e.values,d=Object(o.useState)(l),m=Object(r.a)(d,2),p=m[0],v=m[1],y=Object(o.useState)(!1),w=Object(r.a)(y,2),E=w[0],I=w[1];return c.a.createElement("div",null,c.a.createElement(h.a,{numRows:t.length,rowHeaderCellRenderer:g(t)},function(e,t,n,r,a,i){return n.map(function(l){return c.a.createElement(f.a,{key:"MATRIX_".concat(a,"_").concat(l.id),name:l.name,cellRenderer:b(e,t,n,r,i)})})}(p,t,n,v,i,I)),c.a.createElement(u.b,{style:{position:"fixed",bottom:"30px",right:"50px"},type:"submit",text:"Save Changes",disabled:!E,onClick:function(){a(i,p),I(!1)},intent:s.a.SUCCESS,large:!0}))}},410:function(e,t,n){"use strict";var r=n(3),a=n.n(r),i=n(5),l=n.n(i),o=n(0),c=n(16),u=n(2),s=n(372);var d=function(e,t,n,r,i){var l=a.a.useState(e),o=Object(s.a)(l,2),d=o[0],m=o[1],f=a.a.useState({}),h=Object(s.a)(f,2),p=h[0],v=h[1],b=a.a.useState({}),g=Object(s.a)(b,2),y=g[0],w=g[1],E=a.a.useState(!1),I=Object(s.a)(E,2),S=I[0],C=I[1],x=a.a.useState(!1),O=Object(s.a)(x,2),R=O[0],j=O[1];return a.a.useEffect(function(){S&&(0===Object.keys(p).length?(i(d),C(!1),j(!1)):C(!1))},[p,S,i,d]),a.a.useEffect(function(){m(e)},[e]),{handleSubmit:function(e){e.preventDefault();var a=t(d,r);v(a);var i=n(d,r);w(i),C(!0)},handleChange:function(e){m(Object(u.a)({},d,Object(c.a)({},e.target.name,e.target.value))),j(!0)},handleBlur:function(){var e=t(d,r);v(e);var a=n(d,r);w(a),j(!0)},values:d,errors:p,warnings:y,isSubmitting:S,touched:R}},m=n(74),f=n(24),h=n(482),p=n(471),v=n(433),b=n(589),g=n(590),y=n(638),w=n(434),E=n(967),I=n(62),S=n(61),C=n(4),x=function(e){var t=e.model,n=C.w(t),r=n.measures,a=n.parameters,i=n.stakeholders,l=r.reduce(function(e,t){return e.push("mb_".concat(t.name.replace(/ /gi,"_"))),e.push("ms_".concat(t.name.replace(/ /gi,"_"))),e.push("mc_".concat(t.name.replace(/ /gi,"_"))),e},[]),o=a.reduce(function(e,t){return e.push(t.name),e},l);return i.reduce(function(e,t){return e.push("sr_".concat(t.name.replace(/ /gi,"_"))),e.push("sm_".concat(t.name.replace(/ /gi,"_"))),e},o)},O=n(629),R=n.n(O),j=(n(533),Object(S.b)(function(e){return{options:x(e)}},function(){return{}})(function(e){var t=e.options,n=(e.initialValue,Object(I.a)(e,["options","initialValue"]));return a.a.createElement(R.a,Object.assign({style:{width:"100%"},Component:"input",options:t,trigger:"",spacer:" ",matchAny:!0},n))})),N=n(11),A=n(415),T=n(929),k=(n(534),function(e){return function(t,n){var r=e.map(function(e){return e.id}).includes(t.id);return a.a.createElement(A.a,{key:"MEASURE_THEME_SELECT_VALUE_".concat(t.id),text:t.name,active:n.modifiers.active,icon:r?"tick":"blank",onClick:n.handleClick})}}),D=function(e){return e.name},V=function(e,t){return function(n){e.map(function(e){return e.id}).includes(n.id)?t(e.filter(function(e){return e.id!==n.id}).map(function(e){return e.id})):t([].concat(Object(N.a)(e.map(function(e){return e.id})),[n.id]))}},B=Object(S.b)(function(e){return{measures:e.model.programmes[0].measures}},null)(function(e){var t=e.measures,n=e.active,r=e.setActive,i=n.map(function(e){var n=t.find(function(t){return t.id===e});if(!n)throw new Error("Selected measure was not found");return n});return a.a.createElement("div",{style:{width:"100%"}},a.a.createElement(T.a,{selectedItems:i,items:t,itemRenderer:k(i),onItemSelect:V(i,r),tagRenderer:D,tagInputProps:{onRemove:function(e,t){return r(i.filter(function(e,n){return n!==t}).map(function(e){return e.id}))}},popoverProps:{position:"auto-end"}}))});n.d(t,"a",function(){return _});var P={position:"fixed",bottom:"30px",right:"50px"},_=function(e){return a.a.createElement(m.b,Object.assign({style:P,type:"submit",text:"Save Changes",intent:f.a.SUCCESS,large:!0},e))},L=function(){return a.a.createElement(h.a,{minimal:!0,disabled:!0,icon:"error",intent:f.a.DANGER})},q=function(){return a.a.createElement(h.a,{minimal:!0,disabled:!0,icon:"warning-sign",intent:f.a.WARNING})},F=function(){return a.a.createElement(h.a,{minimal:!0,disabled:!0,icon:"percentage",intent:f.a.PRIMARY})},U=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT,r=e.error&&L||e.warning&&q;return a.a.createElement(p.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(v.a,{intent:n,type:"text",name:e.name,value:e.value,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:e.placeholder,rightElement:r&&a.a.createElement(r,null)}))},G=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT;return a.a.createElement(p.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(b.a,{fill:!0,intent:n,name:e.name,value:e.value,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:e.placeholder}))},M=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT,r=e.error&&L||e.warning&&q,i=l()(e.value,o.V,!0).toDate();return a.a.createElement(p.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(E.a,{intent:n,value:i,onChange:function(t,n){n&&e.handleChange({target:{name:e.name,value:l()(t).format(o.V)}})},inputProps:{onBlur:e.handleBlur},dayPickerProps:{onBlur:e.handleBlur},placeholder:e.placeholder,rightElement:r&&a.a.createElement(r,null),parseDate:function(e){return l()(e,o.V,!0).toDate()},formatDate:function(e){return l()(e).format(o.V)},maxDate:l()("2040-12-31",o.V,!0).toDate(),canClearSelection:!1}))},Q=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT,r=e.items.map(function(e){return a.a.createElement("option",{key:e.id,value:e.value},e.label)});return a.a.createElement(p.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(g.a,{intent:n,name:e.name,value:e.value,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:e.placeholder},r))},W=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT,r=e.error&&L||e.warning&&q,i="number"===typeof e.minValue||"number"===typeof e.maxValue;return a.a.createElement(p.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(y.a,{intent:n,name:e.name,value:e.value,onValueChange:function(t,n){Number.isNaN(t)||"."===n[n.length-1]?e.handleChange({target:{name:e.name,value:n}}):e.handleChange({target:{name:e.name,value:t}})},onBlur:e.handleBlur,placeholder:e.placeholder,rightElement:r&&a.a.createElement(r,null),clampValueOnBlur:i,min:e.minValue,max:e.maxValue,allowNumericCharactersOnly:!1}))},K=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT,r=e.error&&L||e.warning&&q||F,i=e.value;return"number"===typeof e.value&&(i=100*e.value),a.a.createElement(p.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(y.a,{intent:n,name:e.name,value:i,onValueChange:function(t,n){Number.isNaN(t)||"."===n[n.length-1]?e.handleChange({target:{name:e.name,value:n}}):e.handleChange({target:{name:e.name,value:t/100}})},onBlur:e.handleBlur,placeholder:e.placeholder,rightElement:r&&a.a.createElement(r,null),clampValueOnBlur:!0,min:0,max:100,minorStepSize:.5,majorStepSize:10,allowNumericCharactersOnly:!1}))},H=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT;return a.a.createElement(p.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(B,{active:e.value,setActive:function(t){return e.handleChange({target:{name:"measures",value:t}})}}))},z=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT;return a.a.createElement(p.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(w.c,{intent:n,name:e.name,checked:e.value,onChange:function(){e.handleChange({target:{name:"dynamic",value:!e.value}})},onBlur:e.handleBlur,placeholder:e.placeholder}))},Y=function(e){var t=e.error||e.warning||e.helperText,n=e.error&&f.a.DANGER||e.warning&&f.a.WARNING||f.a.DEFAULT;return a.a.createElement(p.a,{label:e.label,labelInfo:e.labelInfo,helperText:t,intent:n},a.a.createElement(j,{intent:n,name:e.name,value:e.value,onChange:function(t){return e.handleChange({target:{name:e.name,value:t}})},onBlur:e.handleBlur,placeholder:e.placeholder}))};t.b=function(e){var t=e.formData,n=e.initialValues,r=e.model,i=e.handleUpdate,l=t.fields,o=t.validate,c=t.warn,u=d(n,o,c,r,i);return a.a.createElement("form",{onSubmit:u.handleSubmit,style:{width:"700px"}},l.map(function(e){return function(t){var n=e.errors,r=e.warnings,i=e.values,l=e.handleChange,o=e.handleBlur,c=t.id,u=t.name;switch(t.type){case"text":if("string"!==typeof i[u])throw new Error("Value of text input type was not a string");return a.a.createElement(U,Object.assign({key:c},t,{error:n[u],warning:r[u],value:i[u],handleChange:l,handleBlur:o}));case"textarea":if("string"!==typeof i[u])throw new Error("Value of textarea input type was not a string");return a.a.createElement(G,Object.assign({key:c},t,{error:n[u],warning:r[u],value:i[u],handleChange:l,handleBlur:o}));case"number":if("string"!==typeof i[u]&&"number"!==typeof i[u])throw new Error("Value of number input type was not a string or number");return a.a.createElement(W,Object.assign({key:c},t,{error:n[u],warning:r[u],value:i[u],handleChange:l,handleBlur:o}));case"percentage":if("string"!==typeof i[u]&&"number"!==typeof i[u])throw new Error("Value of percentage input type was not a string or number");return a.a.createElement(K,Object.assign({key:c},t,{error:n[u],warning:r[u],value:i[u],handleChange:l,handleBlur:o}));case"date":if("string"!==typeof i[u])throw new Error("Value of date input type was not a string");return a.a.createElement(M,Object.assign({key:c},t,{error:n[u],warning:r[u],value:i[u],handleChange:l,handleBlur:o}));case"select":if("string"!==typeof i[u])throw new Error("Value of select input type was not a boolean");return a.a.createElement(Q,Object.assign({key:c},t,{error:n[u],warning:r[u],value:i[u],handleChange:l,handleBlur:o}));case"switch":if("boolean"!==typeof i[u])throw new Error("Value of switch input type was not a boolean");return a.a.createElement(z,Object.assign({key:c},t,{error:n[u],warning:r[u],value:i[u],handleChange:l,handleBlur:o}));case"equation":if("string"!==typeof i[u])throw new Error("Value of equation input type was not a string");return a.a.createElement(Y,Object.assign({key:c},t,{error:n[u],warning:r[u],value:i[u],handleChange:l,handleBlur:o}));case"theme-measures":if(!Array.isArray(i[u]))throw new Error("Value of measures input type was not an array");return a.a.createElement(H,Object.assign({key:c},t,{error:n[u],warning:r[u],value:i[u],handleChange:l}));default:throw new Error("Unrecognised field type when rendering form")}}}(u)),a.a.createElement(_,{disabled:u.isSubmitting||!u.touched}))}},412:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"MULTISELECT",function(){return i}),n.d(r,"MULTISELECT_POPOVER",function(){return l}),n.d(r,"OMNIBAR",function(){return o}),n.d(r,"OMNIBAR_OVERLAY",function(){return c}),n.d(r,"SELECT",function(){return u}),n.d(r,"SELECT_POPOVER",function(){return s});var a=n(63).e.getClassNamespace(),i=a+"-multi-select",l=i+"-popover",o=a+"-omnibar",c=o+"-overlay",u=a+"-select",s=u+"-popover";n.d(t,"a",function(){return r})},428:function(e,t,n){"use strict";function r(e,t,n){if(0===e.query.length&&void 0!==n)return n;var r=e.filteredItems.map(e.renderItem).filter(function(e){return null!=e});return r.length>0?r:t}n.d(t,"a",function(){return r})},429:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(63);function a(e,t,n){return void 0===e||null==t||null==n?t===n:r.l.isFunction(e)?e(t,n):t[e]===n[e]}},430:function(e,t,n){"use strict";function r(){return{__blueprintCreateNewItemBrand:"blueprint-create-new-item"}}function a(e){if(null==e)return!1;var t=Object.keys(e);return 1===t.length&&"__blueprintCreateNewItemBrand"===t[0]&&"blueprint-create-new-item"===e.__blueprintCreateNewItemBrand}function i(e){return null==e||a(e)?null:e}n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return i})},463:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(10),a=n(3),i=n(414),l=n(63),o=n(17),c=n(428),u=n(429),s=n(430),d=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.refHandlers={itemsParent:function(e){return r.itemsParentRef=e}},r.shouldCheckActiveItemInViewport=!1,r.expectedNextActiveItem=null,r.renderItemList=function(e){var t=r.props,n=t.initialContent,l=t.noResults,o=r.isCreateItemRendered()?null:l,u=Object(c.a)(e,o,n),s=r.isCreateItemRendered()?r.renderCreateItemMenuItem(r.state.query):null;return null==u&&null==s?null:a.createElement(i.a,{ulRef:e.itemsParentRef},u,s)},r.renderItem=function(e,t){var n=r.state,a=n.activeItem,i=n.query,l=r.state.filteredItems.indexOf(e)>=0,o={active:Object(u.a)(r.props.itemsEqual,Object(s.a)(a),e),disabled:p(e,t,r.props.itemDisabled),matchesPredicate:l};return r.props.itemRenderer(e,{handleClick:function(t){return r.handleItemSelect(e,t)},index:t,modifiers:o,query:i})},r.renderCreateItemMenuItem=function(e){var t=r.state.activeItem,n=Object(s.c)(t);return l.l.safeInvoke(r.props.createNewItemRenderer,e,n,function(t){r.handleItemCreate(e,t)})},r.handleItemCreate=function(e,t){var n=l.l.safeInvoke(r.props.createNewItemFromQuery,e);null!=n&&(l.l.safeInvoke(r.props.onItemSelect,n,t),r.setQuery("",!0))},r.handleItemSelect=function(e,t){r.setActiveItem(e),l.l.safeInvoke(r.props.onItemSelect,e,t),r.props.resetOnSelect&&r.setQuery("",!0)},r.handlePaste=function(e){for(var t,n=r.props,a=n.createNewItemFromQuery,i=n.onItemsPaste,o=[],c=[],u=0,s=e;u<s.length;u++){var d=s[u],m=f(d,r.props);if(void 0!==m)t=m,c.push(m);else if(r.canCreateItems()){var h=l.l.safeInvoke(a,d);void 0!==h&&c.push(h)}else o.push(d)}r.setQuery(o.join(", "),!1),void 0!==t&&r.setActiveItem(t),l.l.safeInvoke(i,c)},r.handleKeyDown=function(e){var t=e.keyCode;if(t===l.j.ARROW_UP||t===l.j.ARROW_DOWN){e.preventDefault();var n=r.getNextActiveItem(t===l.j.ARROW_UP?-1:1);null!=n&&r.setActiveItem(n)}l.l.safeInvoke(r.props.onKeyDown,e)},r.handleKeyUp=function(e){var t=r.props.onKeyUp,n=r.state.activeItem;e.keyCode===l.j.ENTER&&(e.preventDefault(),null==n||Object(s.c)(n)?r.handleItemCreate(r.state.query,e):r.handleItemSelect(n,e)),l.l.safeInvoke(t,e)},r.handleQueryChange=function(e){var t=null==e?"":e.target.value;r.setQuery(t),l.l.safeInvoke(r.props.onQueryChange,t,e)};var o=t.query,d=void 0===o?"":o,m=l.l.safeInvoke(t.createNewItemFromQuery,d),b=h(d,t);return r.state={activeItem:void 0!==r.props.activeItem?r.props.activeItem:v(b,t.itemDisabled),createNewItem:m,filteredItems:b,query:d},r}return r.c(t,e),t.ofType=function(){return t},t.prototype.render=function(){var e=this.props,t=e.className,n=e.items,a=e.renderer,i=e.itemListRenderer,l=void 0===i?this.renderItemList:i,o=this.state,c=(o.createNewItem,r.d(o,["createNewItem"]));return a(r.a({},c,{className:t,handleItemSelect:this.handleItemSelect,handleKeyDown:this.handleKeyDown,handleKeyUp:this.handleKeyUp,handlePaste:this.handlePaste,handleQueryChange:this.handleQueryChange,itemList:l(r.a({},c,{items:n,itemsParentRef:this.refHandlers.itemsParent,renderItem:this.renderItem}))}))},t.prototype.componentWillReceiveProps=function(e){void 0!==e.activeItem&&(this.shouldCheckActiveItemInViewport=!0,this.setState({activeItem:e.activeItem})),null!=e.query&&this.setQuery(e.query,e.resetOnQuery,e)},t.prototype.componentDidUpdate=function(e){var t=this;l.l.shallowCompareKeys(this.props,e,{include:["items","itemListPredicate","itemPredicate"]})||this.setQuery(this.state.query),this.shouldCheckActiveItemInViewport&&(requestAnimationFrame(function(){return t.scrollActiveItemIntoView()}),this.shouldCheckActiveItemInViewport=!1)},t.prototype.scrollActiveItemIntoView=function(){var e=!1!==this.props.scrollToActiveItem,t=!Object(u.a)(this.props.itemsEqual,Object(s.a)(this.expectedNextActiveItem),Object(s.a)(this.props.activeItem));if(this.expectedNextActiveItem=null,e||!t){var n=this.getActiveElement();if(null!=this.itemsParentRef&&null!=n){var r=n.offsetTop,a=n.offsetHeight,i=this.itemsParentRef,l=i.offsetTop,o=i.scrollTop,c=i.clientHeight,d=this.getItemsParentPadding(),m=d.paddingTop,f=r+a+d.paddingBottom-l,h=r-m-l;f>=o+c?this.itemsParentRef.scrollTop=f+a-c:h<=o&&(this.itemsParentRef.scrollTop=h-a)}}},t.prototype.setQuery=function(e,t,n){void 0===t&&(t=this.props.resetOnQuery),void 0===n&&(n=this.props);var r=n.createNewItemFromQuery;this.shouldCheckActiveItemInViewport=!0;var a=e!==this.state.query;a&&l.l.safeInvoke(n.onQueryChange,e);var i=h(e,n),o=null!=r&&""!==e?r(e):void 0;this.setState({createNewItem:o,filteredItems:i,query:e});var c=this.getActiveIndex(i),u=t||c<0||p(Object(s.a)(this.state.activeItem),c,n.itemDisabled);a&&u&&this.setActiveItem(v(i,n.itemDisabled))},t.prototype.getActiveElement=function(){var e=this.state.activeItem;if(null!=this.itemsParentRef){if(Object(s.c)(e))return this.itemsParentRef.children.item(this.state.filteredItems.length);var t=this.getActiveIndex();return this.itemsParentRef.children.item(t)}},t.prototype.getActiveIndex=function(e){void 0===e&&(e=this.state.filteredItems);var t=this.state.activeItem;if(null==t||Object(s.c)(t))return-1;for(var n=0;n<e.length;++n)if(Object(u.a)(this.props.itemsEqual,e[n],t))return n;return-1},t.prototype.getItemsParentPadding=function(){var e=getComputedStyle(this.itemsParentRef),t=e.paddingTop;return{paddingBottom:m(e.paddingBottom),paddingTop:m(t)}},t.prototype.getNextActiveItem=function(e,t){if((void 0===t&&(t=this.getActiveIndex()),this.isCreateItemRendered())&&(0===t&&-1===e||t===this.state.filteredItems.length-1&&1===e))return Object(s.b)();return v(this.state.filteredItems,this.props.itemDisabled,e,t)},t.prototype.setActiveItem=function(e){this.expectedNextActiveItem=e,void 0===this.props.activeItem&&(this.shouldCheckActiveItemInViewport=!0,this.setState({activeItem:e})),Object(s.c)(e)?l.l.safeInvoke(this.props.onActiveItemChange,null,!0):l.l.safeInvoke(this.props.onActiveItemChange,e,!1)},t.prototype.isCreateItemRendered=function(){return this.canCreateItems()&&""!==this.state.query&&!this.wouldCreatedItemMatchSomeExistingItem()},t.prototype.canCreateItems=function(){return null!=this.props.createNewItemFromQuery&&null!=this.props.createNewItemRenderer},t.prototype.wouldCreatedItemMatchSomeExistingItem=function(){var e=this;return this.state.filteredItems.some(function(t){return Object(u.a)(e.props.itemsEqual,t,e.state.createNewItem)})},t.displayName=o.a+".QueryList",t.defaultProps={resetOnQuery:!0},t}(a.Component);function m(e){return null==e?0:parseInt(e.slice(0,-2),10)}function f(e,t){var n=t.items,r=t.itemPredicate;if(l.l.isFunction(r))for(var a=0;a<n.length;a++){var i=n[a];if(r(e,i,a,!0))return i}}function h(e,t){var n=t.items,r=t.itemPredicate,a=t.itemListPredicate;return l.l.isFunction(a)?a(e,n):l.l.isFunction(r)?n.filter(function(t,n){return r(e,t,n)}):n}function p(e,t,n){return null!=n&&null!=e&&(l.l.isFunction(n)?n(e,t):!!e[n])}function v(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=e.length-1),0===e.length)return null;var a,i,l,o=r,c=e.length-1;do{if(l=c,!p(e[o=(a=o+n)<(i=0)?l:a>l?i:a],o,t))return e[o]}while(o!==r);return null}},532:function(e,t,n){"use strict";var r=n(410);t.a=r.b},533:function(e,t,n){},534:function(e,t,n){},541:function(e,t,n){"use strict";var r=n(62),a=n(3),i=n.n(a),l=n(400),o=n(385),c=n(189),u=n(74),s=n(63),d=n(24),m=function(e){var t=e.children,n=e.title,a=e.text,m=e.dismissLabel,f=e.onClick,h=e.confirmLabel,p=Object(r.a)(e,["children","title","text","dismissLabel","onClick","confirmLabel"]);return i.a.createElement(l.a,p,t,i.a.createElement("div",{style:{padding:10}},i.a.createElement(o.g,null,n),Array.isArray(a)?a.map(function(e,t){return i.a.createElement(c.a,{key:"confirmation_".concat(t)},e)}):i.a.createElement(c.a,null,a),i.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:15}},i.a.createElement(u.b,{className:s.e.POPOVER_DISMISS,style:{marginRight:10}},m),i.a.createElement(u.b,{intent:d.a.DANGER,className:s.e.POPOVER_DISMISS,onClick:f},h))))};m.defaultProps={confirmLabel:"Confirm",dismissLabel:"Cancel"};var f=m;t.a=f},966:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),i=n(61),l=n(2),o=n(4),c=n(0);function u(e,t){var n=o.A(e.model,t);return{id:n.id,name:n.name,definition:n.definition}}function s(e){var t=e.certainty.explorer.selected;if(t)switch(t.type.id){case c.wc:return"root";case c.ic:return"phaseSensitivity";case c.x:return"benefitSensitivity";case c.ib:return"deliverableSensitivity";case c.Zb:return"phaseCostSensitivity";case c.r:return"benefitBuildupSensitivity";default:throw new Error("Tried to get certainty display, something was selected, but type was not recognised")}}function d(e){var t=e.certainty.explorer.selected;return t?t.scenarioId:void 0}function m(e,t,n){var r=o.B(e.model).find(function(e){return e.id===t});if(!r)throw new Error("Could not find scenario with id ".concat(t," when rendering ").concat(n));return r[n]}function f(e,t){return o.A(e.model,t).benefitSensitivity.map(function(e){return Object(l.a)({},e,{sensitivity:100*e.sensitivity})})}function h(e){var t=e.certainty.explorer.selected,n=e.model,r=n.programmes[0],a=e.model.programmes[0].scenarios,i={icon:c.yb,text:n.name},l={icon:c.yb,text:r.name},o={icon:c.vc,text:"Scenarios"};if(t){if(t.type.id===c.wc)return[i,l,o,{icon:t.type.icon,text:t.label}];var u=a.find(function(e){return t.scenarioId===e.id});if(!u)throw new Error("Could not find parent scenario when constructing breadcrumbs");return[i,l,o,{icon:c.vc,text:u.name},{icon:t.type.icon,text:t.label}]}return[]}var p=n(587),v=Object(i.b)(function(e){return{breadcrumbs:h(e)}},null)(function(e){var t=e.breadcrumbs;return a.a.createElement("div",{style:{width:"100%"}},a.a.createElement(p.a,{items:t}))}),b=n(108),g=n(74),y=n(24),w=n(541),E=function(e){return{position:"absolute",padding:"10px 10px 0 10px",top:0,left:0,zIndex:1,width:"calc(100% - 12px)",borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:"#00000030",backgroundColor:e?"rgb(48, 64, 77)":"white"}},I={margin:"10px 0",minHeight:"24px"},S=function(e){var t,n,r,i=e.display,l=e.handleReset;switch(i){case"phaseSensitivity":t="Reset Phase Values to Model Values",n="This will reset all the phase values to those defined in the main model.",r="Reset Phases to Model Values";break;case"benefitBuildupSensitivity":case"phaseCostSensitivity":t="Reset Sensitivity Values to Zero",n="This will reset all the sensitivity values in the matrix to zero.",r="Reset to Zero";break;case"benefitSensitivity":t="Reset Sensitivity Values to Zero",n="This will reset all benefit sensitivity values to zero.",r="Reset to Zero";break;case"root":t="Reset ALL Scenario Values to Model Values",n="This will reset the whole scenario back to that defined in the model",r="Reset Scenario";break;default:throw new Error("Tried to render a reset button on a non-resetable scenario type")}return a.a.createElement(b.a,{style:{float:"right"}},a.a.createElement(w.a,{title:t,text:n,onClick:l},a.a.createElement(g.b,{small:!0,intent:y.a.DANGER},r)))},C=Object(i.b)(function(e){return{display:s(e)}},function(e){return{handleReset:function(){return console.log("reset values")}}})(function(e){var t=e.handleReset,n=e.display;return a.a.createElement("div",{style:I},"root"===n&&a.a.createElement(b.a,null,a.a.createElement(g.b,{small:!0,icon:"duplicate"},"Duplicate Scenario"),a.a.createElement(w.a,{title:"Delete Scenario?",text:"This will remove the entire scenario from the model?"},a.a.createElement(g.b,{small:!0,icon:"trash",intent:y.a.DANGER},"Delete Scenario"))),["benefitSensitivity","deliverableSensitivity","phaseSensitivity"].includes(n)&&a.a.createElement(b.a,null,a.a.createElement(g.b,{small:!0},"Select All"),a.a.createElement(g.b,{small:!0},"Deselect All")),["phaseSensitivity","phaseCostSensitivity","benefitBuildupSensitivity","benefitSensitivity","root"].includes(n)&&a.a.createElement(S,{display:n,handleReset:t}))}),x=function(e){var t=e.dark;return a.a.createElement("div",{style:E(t)},a.a.createElement(v,null),a.a.createElement(C,null))},O=n(378),R=n(532),j=Object(i.b)(function(e,t){return{formData:c.uc,initialValues:u(e,t.scenarioId),model:e.model}},function(e,t){return{handleUpdate:function(n){return e(Object(O.f)(t.scenarioId,c.xc,n))}}})(R.a),N=function(e){var t=e.scenarioId;return a.a.createElement(j,{scenarioId:t})},A=n(372),T=n(11),k=n(471),D=n(638),V=n(482),B=n(434),P=n(588),_=n(385),L=n(410),q=function(e){var t=e.label,n=e.labelInfo,r=e.helperText,i=e.handleChange,l=e.value;return a.a.createElement(k.a,{label:t,labelInfo:n,helperText:r},a.a.createElement(D.a,{allowNumericCharactersOnly:!1,clampValueOnBlur:!0,max:200,min:-200,onValueChange:function(e,t){Number.isNaN(e)||"."===t[t.length-1]?i(t):i(e)},rightElement:a.a.createElement(V.a,{icon:"percentage"}),value:l}))},F=function(e){var t=e.label,n=e.labelInfo,r=e.value,i=e.handleChange;return a.a.createElement(k.a,{label:t,labelInfo:n,inline:!0},a.a.createElement(B.c,{checked:r,onChange:i}))},U=function(e){var t=e.benefit,n=e.switchState,r=e.sensitivity,i=e.handleSwitchChange,l=e.handleSensitivityChange,o=e.width,u="".concat(t.name," (").concat(t.type===c.z?"Financial":"Non-Financial",")");return a.a.createElement(P.a,{style:{marginBottom:"10px",marginRight:"10px",width:o}},a.a.createElement(_.g,null,u),a.a.createElement(F,{label:"Switch",labelInfo:"(required)",handleChange:i,value:n}),a.a.createElement(q,{label:"Sensitivity",labelInfo:"(required)",helperText:"Percentage increase/decrease applied to benefit",handleChange:l,value:r}))},G=function(e,t,n){return function(r){var i=e.find(function(e){return e.id===r.id});if(!i)throw new Error("Could not find benefit sensitivity with id ".concat(r.id));var o=i.switch,c=i.sensitivity,u=function(e,t,n){return function(){var r=t.filter(function(t){return t.id!==e}),a=t.find(function(t){return t.id===e});if(!a)throw new Error("Could not find sensitivity value for benefit id ".concat(e));var i=[].concat(Object(T.a)(r),[Object(l.a)({},a,{switch:!a.switch})]);n(i)}}(r.id,e,t),s=function(e,t,n){return function(r){var a=t.filter(function(t){return t.id!==e}),i=t.find(function(t){return t.id===e}),o=[].concat(Object(T.a)(a),[Object(l.a)({},i,{sensitivity:r})]);n(o)}}(r.id,e,t);return a.a.createElement(U,{key:"BENEFIT_SENSITIVITY_ITEM_".concat(r.id),benefit:r,switchState:o,sensitivity:c,handleSwitchChange:u,handleSensitivityChange:s,width:n})}},M=Object(i.b)(function(e,t){return{benefits:o.f(e.model),benefitSensitivity:f(e,t.scenarioId)}},function(e,t){return{handleSave:function(n){return e(Object(O.i)(t.scenarioId,"benefitSensitivity",n.map(function(e){return Object(l.a)({},e,{sensitivity:e.sensitivity/100})})))}}})(function(e){var t=e.benefits,n=e.benefitSensitivity,r=e.handleSave,i=e.width,l=a.a.useState(n),o=Object(A.a)(l,2),c=o[0],u=o[1];return a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},t.map(G(c,u,i)),a.a.createElement(L.a,{onClick:function(){return r(c)}}))}),Q=function(e){var t=e.deliverable,n=e.switchState,r=e.handleSwitchChange,i=e.width,l=t.name;return a.a.createElement(P.a,{style:{marginBottom:"10px",marginRight:"10px",width:i}},a.a.createElement(_.g,null,l),a.a.createElement(F,{label:"Switch",labelInfo:"(required)",handleChange:r,value:n}))},W=function(e,t,n){return function(r){var i=e.find(function(e){return e.id===r.id});if(!i)throw new Error("Could not find deliverable sensitivity with id ".concat(r.id));var o=i.switch,c=function(e,t,n){return function(){var r=t.filter(function(t){return t.id!==e}),a=t.find(function(t){return t.id===e});if(!a)throw new Error("Could not find sensitivity value for deliverable id ".concat(e));var i=[].concat(Object(T.a)(r),[Object(l.a)({},a,{switch:!a.switch})]);n(i)}}(r.id,e,t);return a.a.createElement(Q,{key:"DELIVERABLE_SENSITIVITY_ITEM_".concat(r.id),deliverable:r,switchState:o,handleSwitchChange:c,width:n})}},K=Object(i.b)(function(e,t){return{deliverables:o.j(e.model),deliverableSensitivity:o.A(e.model,t.scenarioId).deliverableSensitivity}},function(e,t){return{handleSave:function(n){return e(Object(O.i)(t.scenarioId,"deliverableSensitivity",n))}}})(function(e){var t=e.deliverables,n=e.deliverableSensitivity,r=e.handleSave,i=e.width,l=a.a.useState(n),o=Object(A.a)(l,2),c=o[0],u=o[1];return a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},t.map(W(c,u,i)),a.a.createElement(L.a,{onClick:function(){return r(c)}}))}),H=n(5),z=n.n(H),Y=n(967),Z=function(e){var t=e.label,n=e.labelInfo,r=e.helperText,i=e.handleChange,l=e.value;return a.a.createElement(k.a,{label:t,labelInfo:n,helperText:r},a.a.createElement(D.a,{allowNumericCharactersOnly:!1,clampValueOnBlur:!0,min:0,onValueChange:function(e,t){Number.isNaN(e)||"."===t[t.length-1]?i(t):i(e)},value:l}))},J=function(e){var t=e.label,n=e.labelInfo,r=e.helperText,i=e.value,l=e.handleChange,o=z()(i,c.V,!0).toDate();return a.a.createElement(k.a,{label:t,labelInfo:n,helperText:r},a.a.createElement(Y.a,{value:o,onChange:function(e,t){t&&l(z()(e).format(c.V))},parseDate:function(e){return z()(e,c.V,!0).toDate()},formatDate:function(e){return z()(e).format(c.V)},maxDate:z()("2040-12-31",c.V,!0).toDate(),canClearSelection:!1}))},X=function(e){var t=e.phase,n=e.switchState,r=e.duration,i=e.start,l=e.handleSwitchChange,o=e.handleDurationChange,u=e.handleStartChange,s=e.width,d="".concat(t.name," (").concat(t.slip===c.jc?"Fixed Cost":"Time and Materials",")");return a.a.createElement(P.a,{style:{marginBottom:"10px",marginRight:"10px",width:s}},a.a.createElement(_.g,null,d),a.a.createElement(F,{label:"Switch",labelInfo:"(required)",handleChange:l,value:n}),a.a.createElement(Z,{label:"Duration",labelInfo:"(required)",helperText:"Duration of the phase (for this scenario) in weeks",handleChange:o,value:r}),a.a.createElement(J,{label:"Start Date",labelInfo:"(required)",helperText:"Start date of the phase",handleChange:u,value:i}))},$=function(e,t,n){return function(r){var i=e.find(function(e){return e.id===r.id});if(!i)throw new Error("Could not find phase sensitivity with id ".concat(r.id));var o=i.switch,c=i.duration,u=i.start,s=function(e,t,n){return function(){var r=t.filter(function(t){return t.id!==e}),a=t.find(function(t){return t.id===e});if(!a)throw new Error("Could not find sensitivity value for phase id ".concat(e));var i=[].concat(Object(T.a)(r),[Object(l.a)({},a,{switch:!a.switch})]);n(i)}}(r.id,e,t),d=function(e,t,n){return function(r){var a=t.filter(function(t){return t.id!==e}),i=t.find(function(t){return t.id===e}),o=[].concat(Object(T.a)(a),[Object(l.a)({},i,{duration:r})]);n(o)}}(r.id,e,t),m=function(e,t,n){return function(r){var a=t.filter(function(t){return t.id!==e}),i=t.find(function(t){return t.id===e}),o=[].concat(Object(T.a)(a),[Object(l.a)({},i,{start:r})]);n(o)}}(r.id,e,t);return a.a.createElement(X,{key:"PHASE_SENSITIVITY_ITEM_".concat(r.id),phase:r,switchState:o,duration:c,start:u,handleSwitchChange:s,handleDurationChange:d,handleStartChange:m,width:n})}},ee=Object(i.b)(function(e,t){return{phases:o.v(e.model),phaseSensitivity:o.A(e.model,t.scenarioId).phaseSensitivity}},function(e,t){return{handleSave:function(n){return e(Object(O.i)(t.scenarioId,"phaseSensitivity",n))}}})(function(e){var t=e.phases,n=e.phaseSensitivity,r=e.handleSave,i=e.width,l=a.a.useState(n),o=Object(A.a)(l,2),c=o[0],u=o[1];return a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},t.map($(c,u,i)),a.a.createElement(L.a,{onClick:function(){return r(c)}}))}),te=n(409),ne=Object(i.b)(function(e,t){return{x:o.f(e.model),y:o.v(e.model),values:m(e,t.scenarioId,"benefitBuildupSensitivity"),typeKey:"benefitBuildupSensitivity"}},function(e,t){return{handleSubmit:function(n,r){return e(Object(O.i)(t.scenarioId,"benefitBuildupSensitivity",r))}}})(te.a),re=Object(i.b)(function(e,t){return{x:[{id:"DEVELOPMENT_COST",name:"Development"},{id:"SUPPORT_COST",name:"Support"}],y:o.v(e.model),values:m(e,t.scenarioId,"phaseCostSensitivity"),typeKey:"phaseCostSensitivity"}},function(e,t){return{handleSubmit:function(n,r){return e(Object(O.i)(t.scenarioId,"phaseCostSensitivity",r))}}})(te.a);t.default=Object(i.b)(function(e){return{dark:e.editor.dark,scenarioId:d(e),display:s(e)}},null)(function(e){var t=e.dark,n=e.scenarioId,r=e.display;return a.a.createElement("div",null,a.a.createElement(x,{dark:t}),function(e,t){switch(e){case"root":if("string"!==typeof t)throw new Error("Received non-string scenario id when rendering certainty interface");return a.a.createElement("div",{style:{position:"relative",top:"85px",padding:"10px"}},a.a.createElement(N,{scenarioId:t}));case"benefitBuildupSensitivity":if("string"!==typeof t)throw new Error("Received non-string scenario id when rendering certainty interface");return a.a.createElement("div",{style:{position:"relative",top:"85px",padding:"10px"}},a.a.createElement(ne,{scenarioId:t}));case"phaseCostSensitivity":if("string"!==typeof t)throw new Error("Received non-string scenario id when rendering certainty interface");return a.a.createElement("div",{style:{position:"relative",top:"85px",padding:"10px"}},a.a.createElement(re,{scenarioId:t}));case"benefitSensitivity":if("string"!==typeof t)throw new Error("Received non-string scenario id when rendering certainty interface");return a.a.createElement("div",{style:{position:"relative",top:"85px",padding:"10px"}},a.a.createElement(M,{scenarioId:t,width:"350px"}));case"deliverableSensitivity":if("string"!==typeof t)throw new Error("Received non-string scenario id when rendering certainty interface");return a.a.createElement("div",{style:{position:"relative",top:"85px",padding:"10px"}},a.a.createElement(K,{scenarioId:t,width:"250px"}));case"phaseSensitivity":if("string"!==typeof t)throw new Error("Received non-string scenario id when rendering certainty interface");return a.a.createElement("div",{style:{position:"relative",top:"85px",padding:"10px"}},a.a.createElement(ee,{scenarioId:t,width:"350px"}));default:return a.a.createElement("div",null)}}(r,n))})}}]);
//# sourceMappingURL=12.f1f68892.chunk.js.map